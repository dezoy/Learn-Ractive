/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*! Statesman - v0.2.1 - 2013-08-05
* The JavaScript state management library

* 
* Copyright (c) 2013 Rich Harris; MIT Licensed */

// These are a subset of the easing equations found at
// https://raw.github.com/danro/easing-js - license info
// follows:

// --------------------------------------------------
// easing.js v0.5.4
// Generic set of easing functions with AMD support
// https://github.com/danro/easing-js
// This code may be freely distributed under the MIT license
// http://danro.mit-license.org/
// --------------------------------------------------
// All functions adapted from Thomas Fuchs & Jeremy Kahn
// Easing Equations (c) 2003 Robert Penner, BSD license
// https://raw.github.com/danro/easing-js/master/LICENSE
// --------------------------------------------------

// Divvy v0.1.6
// Copyright (2013) Rich Harris
// Released under the MIT License

/**
 * @license RequireJS text 2.0.5+ Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

(function(){var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){}),define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),function(e){var t,n,r={},i={},s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x={};try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),E=Object.defineProperty,S=Object.defineProperties}catch(T){E=function(e,t,n){e[t]=n.value},S=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&E(e,n,t[n])}}t=function(e){S(this,{data:{value:e||{},writable:!0},subs:{value:{},writable:!0},cache:{value:{}},cacheMap:{value:{}},deps:{value:{}},depsMap:{value:{}},refs:{value:{}},refsMap:{value:{}},computed:{value:{}},subsets:{value:{}},deferred:{value:[]},changes:{value:null,writable:!0},upstreamChanges:{value:null,writable:!0},changeHash:{value:null,writable:!0}})},r.add=function(e,t){var n=this.get(e);t===undefined&&(t=1),f(n)&&f(t)&&this.set(e,+n+(t===undefined?1:+t))},function(e){var t,n,r,i,s;e.compute=function(e,n){var r,i,s;if(typeof e=="object"){r={};for(i in e)e.hasOwnProperty(i)&&(s=new t(this,i,e[i]),r[i]=s.value);return r}return s=new t(this,e,n),s.value},t=function(e,t,i){var s;e.computed[t]&&e.computed[t].teardown(),this.statesman=e,this.keypath=t,e.computed[t]=this,typeof i=="string"?i=o(i,e):(typeof i=="function"&&(i=i()),r(t,i,e.debug)),this.signature=i,this.cache=i.cache,this.async=i.async,this.context=i.context||e,this.refs=[],s=i.dependsOn.length;if(this.cache){s===1&&(this.selfUpdating=!0);while(s--)this.refs[s]=new n(this,i.dependsOn[s])}this.setting=!0,e.set(this.keypath,this.value=this.getter()),this.setting=!1},t.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.statesman.deferred.push(this),this.deferred=!0)},update:function(){var e;return e=this.getter(),a(e,this.value)||(this.setting=!0,h(this.statesman,this.keypath,e),this.setting=!1,this.value=e),this},getter:function(){var e=this,t,n,r,i,s,o;i=this.statesman;try{if(this.signature.compiled)r=this.signature.compiled();else{n=[],this.async&&(s=this.context.async,this.context.async=function(){return function(t){o?(e.setting=!0,i.set(e.keypath,t),e.setting=!1):(wasSynchronous=!0,synchronousResult=t)}});if(this.cache){t=this.refs.length;while(t--)n[t]=this.refs[t].value;r=this.signature.get.apply(this.context,n)}else{t=this.signature.dependsOn.length;while(t--)n[t]=i.get(this.signature.dependsOn[t]);r=this.signature.get.apply(this.context,n)}o=!0,this.async&&(this.context.async=s,wasSynchronous?r=synchronousResult:r===undefined&&(r=this.value))}}catch(u){if(i.debug)throw u;r=undefined}return this.override=!1,r},setter:function(e){if(this.signature.set)try{this.signature.set.call(this.context,e)}catch(t){if(this.statesman.debug)throw t}else if(this.signature.readonly){if(this.statesman.debug)throw new Error('You cannot overwrite a computed value ("'+this.keypath+'"), unless its readonly flag is set true')}else this.override=!0,this.setting=!0,this.statesman.set(this.keypath,e),this.setting=!1},teardown:function(){while(this.refs.length)this.refs.pop().teardown(),this.statesman.computed[this.keypath]=null}},n=function(e,t){this.computed=e,this.statesman=e.statesman,this.keypath=t,this.value=this.statesman.get(t),b(this,!0)},n.prototype={update:function(){var e;e=this.statesman.get(this.keypath),a(e,this.value)||(this.value=e,this.computed.bubble())},teardown:function(){w(this,!0)}},i=[],s=/async/,r=function(e,t,n){if(!t.compiled){if(!t.get&&!t.set)throw new Error("Computed values must have either a get() or a set() method, or both");!t.set&&t.readonly!==!1&&(t.readonly=!0),t.dependsOn?typeof t.dependsOn=="string"&&(t.dependsOn=[t.dependsOn]):t.dependsOn=i;if(!t.dependsOn.length){if(t.cache&&n)throw new Error("Computed values with no dependencies must be uncached");t.cache=!1}t.cache!==!1&&(t.cache=!0),t.get&&s.test(t.get)&&(t.async=!0)}if(t.dependsOn.indexOf(e)!==-1)throw new Error('A computed value ("'+e+'") cannot depend on itself');return t}}(r),r.get=function(e){return p(this,e&&l(e))};var p=function(e,t,n,r){var i,s,o,u,a;return t?((i=e.computed[t])&&!r&&!i.cache&&!i.override&&(e.cache[t]=i.getter()),e.cache.hasOwnProperty(t)?e.cache[t]:(n=n||t.split("."),s=n.pop(),o=n.join("."),u=p(e,o,n),typeof u=="object"&&u.hasOwnProperty(s)&&(a=u[s],e.cache[t]=a,e.cacheMap[o]||(e.cacheMap[o]=[]),e.cacheMap[o].push(t)),a)):e.data};(function(e){var t;e.observe=function(e,n,r){var i,s,o,u,a;a=!r||r.init!==!1,typeof e=="function"&&(r=n,n=e,e="");if(typeof e=="string")return i=new t(this,e,n,r),a?i.update():i.value=this.get(e),{cancel:function(){i.teardown()}};if(typeof e!="object")throw new Error("Bad arguments to Statesman.prototype.observe()");r=n,s=[];for(o in e)e.hasOwnProperty(o)&&(s[s.length]=new t(this,o,e[o],r));u=s.length;if(a)while(u--)s[u].update();else while(u--)s[u].value=this.get(i.keypath);return{cancel:function(){u=s.length;while(u--)s[u].teardown()}}},t=function(e,t,n,r){this.statesman=e,this.keypath=l(t),this.callback=n,this.context=r&&r.context?r.context:e,b(this)},t.prototype={update:function(){var e;e=p(this.statesman,this.keypath);if(!a(e,this.value)){try{this.callback.call(this.context,e,this.value)}catch(t){if(this.statesman.debug)throw t}this.value=e}},teardown:function(){w(this)}}})(r),r.removeComputedValue=function(e){return this.computed[e]&&this.computed[e].teardown(),this},r.reset=function(e){return this.data={},this.set(e,{silent:!0}),this.fire("reset"),v(this,""),this},function(e){var t=/^\s*[0-9]+\s*$/,n,r;e.set=function(e,t,n){var i,s,o,u;this.changes=[],this.upstreamChanges=[],this.changeHash={};if(typeof e=="object"){n=t;for(o in e)e.hasOwnProperty(o)&&(u=l(o),t=e[o],h(this,u,t))}else u=l(e),h(this,u,t);i=[],s=[];while(this.changes.length)r(i,this.changes),r(s,this.upstreamChanges),g(this);return n&&n.silent?this:(m(this,s,!0),i.length&&m(this,i),i.length&&this.fire("change",this.changeHash),this)},h=function(e,t,r){var i,s,o;if((o=e.computed[t])&&!o.setting){o.setter(r);return}i=p(e,t,null,!0);if(i!==r)n(e.data,t,r);else if(typeof r!="object")return;d(e,t),e.changes[e.changes.length]=t,e.changeHash[t]=r,s=t.split(".");while(s.length){s.pop(),t=s.join(".");if(e.upstreamChanges[t])break;e.upstreamChanges[t]=!0,e.upstreamChanges.push(t)}},n=function(e,n,r){var i,s=n.split(".");while(s.length>1)i=s.shift(),e[i]||(e[i]=t.test(s[0])?[]:{}),e=e[i];e[s[0]]=r},r=function(e,t){var n=t.length,r;while(n--)r=t[n],e["_"+r]||(e["_"+r]=!0,e[e.length]=r)}}(r),r.subset=function(e){if(!e)throw"No subset path specified";return this.subsets[e]||(this.subsets[e]=new n(e,this)),this.subsets[e]},r.subtract=function(e,t){var n=this.get(e);t===undefined&&(t=1),f(n)&&f(t)&&this.set(e,+n-(t===undefined?1:+t))},r.toggle=function(e){this.set(e,!this.get(e))},d=function(e,t){var n=e.cacheMap[t];delete e.cache[t];if(!n)return;while(n.length)d(e,n.pop())},f=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},v=function(e,t,n){var r,i,s;r=e.deps[t];if(r){i=r.length;while(i--)r[i].update()}if(n)return;s=e.depsMap[t];if(s){i=s.length;while(i--)v(e,s[i])}},m=function(e,t,n){var r;r=t.length;while(r--)v(e,t[r],n)},g=function(e){var t,n,r,i,s;n=e.changes,r=e.upstreamChanges,e.changes=[],e.upstreamChanges=[],t=r.length;while(t--)i=r[t],y(e,i,!0);t=n.length;while(t--)i=n[t],y(e,i);while(e.deferred.length)s=e.deferred.pop(),s.update(),s.deferred=!1},y=function(e,t,n){var r,i,s;r=e.refs[t];if(r){s=r.length;while(s--)r[s].update()}if(n)return;i=e.refsMap[t];if(i){s=i.length;while(s--)y(e,i[s])}},b=function(e,t){var n,r,i,s,o,u,a,f;n=e.statesman,r=e.keypath,t?(a=n.refs,f=n.refsMap):(a=n.deps,f=n.depsMap),i=a[r]||(a[r]=[]),i[i.length]=e,s=r.split(".");while(s.length)s.pop(),o=s.join("."),u=f[o]||(f[o]=[]),u[r]===undefined&&(u[r]=0,u[u.length]=r),u[r]+=1,r=o},w=function(e,t){var n,r,i,s,o,u,a,f;n=e.statesman,r=e.keypath,t?(a=n.refs,f=n.refsMap):(a=n.deps,f=n.depsMap),i=a[r],i.splice(i.indexOf(e),1),s=r.split(".");while(s.length)s.pop(),o=s.join("."),u=f[o],u[r]-=1,u[r]||(u.splice(u.indexOf(r),1),u[r]=undefined),r=o},u={total:function(e){return e.reduce(function(e,t){return e+t})}},n=function(e,t){var n=this,r,i;this.path=e,this.pathDot=e+".",this.root=t,this.subs={},r=new RegExp("^"+this.pathDot.replace(".","\\.")),i=this.pathDot.length,this.root.on("change",function(e){var t,s,o,u;o={};for(s in e)e.hasOwnProperty(s)&&r.test(s)&&(t=s.substring(i),o[t]=e[s],u=!0);u&&n.fire("change",o)})},i.add=function(e,t){this.root.add(this.pathDot+e,t)},function(e){var t;e.compute=function(e,n){var r,i;if(typeof e=="object"){r={};for(i in e)e.hasOwnProperty(i)&&(r[i]=t(this,i,e));return r}return t(this,e,n)},t=function(e,t,n){var r=e.pathDot,i;if(typeof n=="string")return n=o(n,e.root,r),e.root.compute(r+t,n);typeof n=="function"&&(n=n());if(n.dependsOn){typeof n.dependsOn=="string"&&(n.dependsOn=[n.dependsOn]),i=n.dependsOn.length;while(i--)n.dependsOn=r+n.dependsOn}return n.context||(n.context=e),e.root.compute(r+t,n)}}(i),i.get=function(e){return e?this.root.get(this.pathDot+e):this.root.get(this.path)},i.observe=function(e,t,n){var r,i;if(typeof e=="object"){n=t,i={};for(r in e)e.hasOwnProperty(r)&&(i[this.pathDot+r]=e[r]);return n?n.context=n.context||this:n={context:this},this.root.observe(i,n)}return typeof e=="function"?(n=t,t=e,e=this.path):e===""?e=this.path:e=this.pathDot+e,n?n.context=n.context||this:n={context:this},this.root.observe(e,t,n)},i.removeComputedValue=function(e){return this.root.removeComputedValue(this.pathDot+e),this},i.reset=function(e){return this.root.set(this.path,e),this},i.set=function(e,t,n){var r,i;if(typeof e=="object"){n=t,i={};for(r in e)e.hasOwnProperty(r)&&(i[this.pathDot+r]=e[r]);return this.root.set(i,n),this}return this.root.set(this.pathDot+e,t,n),this},i.subset=function(e){return this.root.subset(this.pathDot+e)},i.subtract=function(e,t){this.root.subtract(this.pathDot+e,t)},i.toggle=function(e){this.root.toggle(this.pathDot+e)},s={},s.on=function(e,t){var n=this,r,i,s;if(typeof e=="object"){s=[];for(i in e)e.hasOwnProperty(i)&&(s[s.length]=this.on(i,e[i]));return{cancel:function(){while(s.length)s.pop().cancel()}}}return this.subs[e]||(this.subs[e]=[]),r=this.subs[e],r[r.length]=t,{cancel:function(){n.off(e,t)}}},s.once=function(e,t){var n=this,r,i,s,o;if(typeof e=="object"){s=[];for(i in e)e.hasOwnProperty(i)&&(s[s.length]=this.once(i,e[i]));return{cancel:function(){while(s.length)s.pop().cancel()}}}return this.subs[e]||(this.subs[e]=[]),r=this.subs[e],o=function(){t.apply(n,arguments),n.off(e,o)},r[r.length]=o,{cancel:function(){n.off(e,o)}}},s.off=function(e,t){var n,r;return e?t?(n=this.subs[e],n&&(r=n.indexOf(t),r!==-1&&n.splice(r,1),n.length||delete this.subs[e]),this):(delete this.subs[e],this):(this.subs={},this)},s.fire=function(e){var t,n,r,i;t=this.subs[e];if(!t)return this;r=t.length,n=Array.prototype.slice.call(arguments,1);for(i=0;i<r;i+=1)t[i].apply(this,n)},function(){var e=/\$\{\s*([a-zA-Z0-9_$\[\]\.]+)\s*\}/g;o=function(n,r,i){var s,o,u,a;return i=i||"",o=[],s=n.replace(e,function(e,t){return o.indexOf(t)===-1&&(o[o.length]=i+t),'m.get("'+i+t+'")'}),u=new Function("utils","var m=this;return "+s),u.bind?a=u.bind(r,t.utils):a=function(){return u.call(r,t.utils)},{compiled:a,dependsOn:o,cache:!!o.length}}}(),a=function(e,t){return e===null&&t===null?!0:typeof e=="object"||typeof t=="object"?!1:e===t},l=function(e){return x[e]||(x[e]=e.replace(/\[\s*([0-9]+)\s*\]/g,".$1"))},c=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},c(r,s),c(i,s),t.prototype=r,n.prototype=i,t.utils=u,typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define("Statesman",[],function(){return t}):e.Statesman=t}(this),function(e){var t,n=e.document||null,r={},s={},o={},u,a,f,l,c,h={},p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R={}.hasOwnProperty,U=function(){},z={},W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot=/^\s+/,ut=/\s+$/,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt="Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",Nt=1,Ct=2,kt=3,Lt=4,At=5,Ot=6,Mt=7,_t=8,Dt=9,Pt=10,Ht=11,Bt=12,jt=13,Ft=14,It=20,qt=21,Rt=22,Ut=23,zt=24,Wt=25,Xt=26,Vt=27,$t=30,Jt=31,Kt=32,Qt=33,Gt=34,Yt=35,Zt=36,en=40,tn={unset:!0},nn=n?n.createElement("div"):null,rn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},sn="0.3.3";try{Object.defineProperty({},"test",{value:0}),Object.defineProperties({},{test:{value:0}}),n&&(Object.defineProperty(nn,"test",{value:0}),Object.defineProperties(nn,{test:{value:0}})),j=Object.defineProperty,F=Object.defineProperties}catch(on){j=function(e,t,n){e[t]=n.value},F=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&j(e,n,t[n])}}try{Object.create(null),I=Object.create,q=function(){return Object.create(null)}}catch(on){I=function(){var e=function(){};return function(t,n){var r;return e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r}}(),q=function(){return{}}}var un=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},an,fn,ln;(function(){if(!n)return;nn.style.transition!==undefined?(fn="transition",ln="transitionend",an=!0):nn.style.webkitTransition!==undefined?(fn="webkitTransition",ln="webkitTransitionEnd",an=!0):an=!1})(),function(e){var t=e.document;if(!t)return;Date.now||(Date.now=function(){return+(new Date)}),t&&!t.createElementNS&&(t.createElementNS=function(e,n){if(e&&e!=="http://www.w3.org/1999/xhtml")throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml";return t.createElement(n)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;t===undefined&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(n=this.length;t<n;t++)if(R.call(this,t)&&this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;for(n=0,r=this.length;n<r;n+=1)R.call(this,n)&&e.call(t,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i=[];for(n=0,r=this.length;n<r;n+=1)R.call(this,n)&&(i[n]=e.call(t,this[n],n,this));return i}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n,r,i=[];for(n=0,r=this.length;n<r;n+=1)R.call(this,n)&&e.call(t,this[n],n,this)&&(i[i.length]=this[n]);return i}),e.addEventListener||function(e,t){var n,r,s,o,u;n=function(e,t){var n,r=this;for(n in e)r[n]=e[n];r.currentTarget=t,r.target=e.srcElement||t,r.timeStamp=+(new Date),r.preventDefault=function(){e.returnValue=!1},r.stopPropagation=function(){e.cancelBubble=!0}},r=function(e,t){var r=this,i,s;i=r.listeners||(r.listeners=[]),s=i.length,i[s]=[t,function(e){t.call(r,new n(e,r))}],r.attachEvent("on"+e,i[s][1])},s=function(e,t){var n=this,r,s,o;if(!n.listeners)return;r=n.listeners,i=r.length;while(i--)r[i][0]===t&&n.detachEvent("on"+e,r[i][1])},e.addEventListener=t.addEventListener=r,e.removeEventListener=t.removeEventListener=s,"Element"in e?(Element.prototype.addEventListener=r,Element.prototype.removeEventListener=s):(o=t.getElementsByTagName("head")[0],u=t.createElement("style"),o.insertBefore(u,o.firstChild),u.styleSheet.cssText="*{-ms-event-prototype:expression(!this.addEventListener&&(this.addEventListener=addEventListener)&&(this.removeEventListener=removeEventListener))}")}(e,t)}(e),D=function(e,n,r,i,s){var o,u,a,f,l;if(!n.transitionsEnabled)return;typeof e=="string"?o=e:(o=e.n,e.a?u=e.a:e.d&&(a=new TextFragment({descriptor:e.d,root:n,owner:r,contextStack:parentFragment.contextStack}),u=a.toJson(),a.teardown())),l=n.transitions[o]||t.transitions[o],l&&(f=n._transitionManager,f.push(r.node),l.call(n,r.node,function(){f.pop(r.node)},u,f.info,s))},M=function(e,t){var r,i=[];r=n.createElement("div"),r.innerHTML=e;while(r.firstChild)i[i.length]=r.firstChild,t.appendChild(r.firstChild);return i},function(){var e,t,n;_=function(t,n,r,i,s){var o,u,a,f,l,c,h,p;f=n.descriptor.i;for(u=r;u<i;u+=1)a=n.fragments[u],l=u-s,c=u,h=n.keypath+"."+(u-s),p=n.keypath+"."+u,a.index+=s,e(a,f,l,c,s,h,p);x(t)},e=function(r,i,s,o,u,a,f){var l,c,h,p;r.indexRefs&&r.indexRefs[i]!==undefined&&(r.indexRefs[i]=o),l=r.contextStack.length;while(l--)p=r.contextStack[l],p.substr(0,a.length)===a&&(r.contextStack[l]=p.replace(a,f));l=r.items.length;while(l--){h=r.items[l];switch(h.type){case Mt:t(h,i,s,o,u,a,f);break;case _t:e(h.fragment,i,s,o,u,a,f);break;case Lt:case Ct:case kt:n(h,i,s,o,u,a,f)}}},t=function(t,n,r,i,s,o,u){var a,f;a=t.attributes.length;while(a--)f=t.attributes[a],f.fragment&&(e(f.fragment,n,r,i,s,o,u),f.twoway&&f.updateBindings());if(t.proxyFrags){a=t.proxyFrags.length;while(a--)e(t.proxyFrags[a],n,r,i,s,o,u)}t.node._ractive&&(t.node._ractive.keypath.substr(0,o.length)===o&&(t.node._ractive.keypath=t.node._ractive.keypath.replace(o,u)),t.node._ractive.index[n]=i),t.fragment&&e(t.fragment,n,r,i,s,o,u)},n=function(t,n,r,i,s,o,u){var a;t.descriptor.x&&(t.keypath&&m(t),t.expressionResolver&&t.expressionResolver.teardown(),t.expressionResolver=new rt(t)),t.keypath?t.keypath.substr(0,o.length)===o&&(m(t),t.keypath=t.keypath.replace(o,u),v(t)):t.indexRef===n&&(t.value=i,t.render(i));if(t.fragments){a=t.fragments.length;while(a--)e(t.fragments[a],n,r,i,s,o,u)}}}(),function(e){var t,n;it=function(e,r,i,s,o){var u,a;this.root=e,this.keypath=r,this.fn=n(i,s.length),this.values=[],this.refs=[],u=s.length;while(u--)a=s[u],a[0]?this.values[u]=a[1]:this.refs[this.refs.length]=new t(e,a[1],this,u,o);this.selfUpdating=this.refs.length<=1,this.update()},it.prototype={bubble:function(){this.selfUpdating?this.update():this.deferred||(this.root._defEvals[this.root._defEvals.length]=this,this.deferred=!0)},update:function(){var e;try{e=this.fn.apply(null,this.values)}catch(t){if(this.root.debug)throw t;e=undefined}return A(e,this.value)||(d(this.root,this.keypath),this.root._cache[this.keypath]=e,g(this.root,this.keypath),this.value=e),this},teardown:function(){while(this.refs.length)this.refs.pop().teardown();d(this.root,this.keypath),this.root._evaluators[this.keypath]=null},refresh:function(){this.selfUpdating||(this.deferred=!0);var e=this.refs.length;while(e--)this.refs[e].update();this.deferred&&(this.update(),this.deferred=!1)}},t=function(e,t,n,r,i){this.evaluator=n,this.keypath=t,this.root=e,this.argNum=r,this.type=$t,this.priority=i,this.value=n.values[r]=e.get(t),v(this)},t.prototype={update:function(){var e=this.root.get(this.keypath);A(e,this.value)||(this.evaluator.values[this.argNum]=e,this.evaluator.bubble(),this.value=e)},teardown:function(){m(this)}},n=function(t,n){var r,i;t=t.replace(/\$\{([0-9]+)\}/g,"_$1");if(e[t])return e[t];i=[];while(n--)i[n]="_"+n;return r=new Function(i.join(","),"return("+t+")"),e[t]=r,r}}({}),function(){var e,t;rt=function(t){var n,r,i,s,o,u;this.root=t.root,this.mustache=t,this.args=[],this.scouts=[],n=t.descriptor.x,o=t.parentFragment.indexRefs,this.str=n.s,i=this.unresolved=n.r?n.r.length:0,i||this.init();for(r=0;r<i;r+=1)s=n.r[r],o&&o[s]!==undefined?this.resolveRef(r,!0,o[s]):this.scouts[this.scouts.length]=new e(this,s,t.contextStack,r)},rt.prototype={init:function(){this.keypath=t(this.str,this.args),this.createEvaluator(),this.mustache.resolve(this.keypath)},teardown:function(){while(this.scouts.length)this.scouts.pop().teardown()},resolveRef:function(e,t,n){this.args[e]=[t,n];if(--this.unresolved)return;this.init()},createEvaluator:function(){this.root._evaluators[this.keypath]?this.root._evaluators[this.keypath].refresh():this.root._evaluators[this.keypath]=new it(this.root,this.keypath,this.str,this.args,this.mustache.priority)}},e=function(e,t,n,r){var i,s;s=this.root=e.root,i=S(s,t,n),i?e.resolveRef(r,!1,i):(this.ref=t,this.argNum=r,this.resolver=e,this.contextStack=n,s._pendingResolution[s._pendingResolution.length]=this)},e.prototype={resolve:function(e){this.keypath=e,this.resolver.resolveRef(this.argNum,!1,e)},teardown:function(){this.keypath||p(this)}},t=function(e,t){var n;return n=e.replace(/\$\{([0-9]+)\}/g,function(e,n){return t[n][1]}),"("+n.replace(/[\.\[\]]/g,"-")+")"}}(),function(){var e,r;P=function(i,s){var o,u;if(u=e(i,s))return u;if(u=e(t,s))return u;if(n){o=n.getElementById(s);if(o&&o.tagName==="SCRIPT"){if(!t.parse)throw new Error(Tt);t.partials[s]=t.parse(o.innerHTML)}}return u=t.partials[s],u?r(u):(i.debug&&console&&console.warn&&console.warn('Could not find descriptor for partial "'+s+'"'),[])},e=function(e,n){if(e.partials[n]){if(typeof e.partials[n]=="string"){if(!t.parse)throw new Error(Tt);e.partials[n]=t.parse(e.partials[n])}return r(e.partials[n])}},r=function(e){return e.length===1&&typeof e[0]=="string"?e[0]:e}}(),pt=function(e,t){var n,r,i,s,o,u;e.owner=t.owner,s=e.owner.parentFragment,e.root=t.root,e.parentNode=t.parentNode,e.contextStack=t.contextStack||[],e.owner.type===Lt&&(e.index=t.index);if(s){o=s.indexRefs;if(o){e.indexRefs=q();for(u in o)e.indexRefs[u]=o[u]}}e.priority=s?s.priority+1:0,t.indexRef&&(e.indexRefs||(e.indexRefs={}),e.indexRefs[t.indexRef]=t.index),e.items=[],i={parentFragment:e},n=t.descriptor?t.descriptor.length:0;for(r=0;r<n;r+=1)i.descriptor=t.descriptor[r],i.index=r,e.items[e.items.length]=e.createItem(i)},ft=function(e,t){var n,r,i,s;s=e.parentFragment=t.parentFragment,e.root=s.root,e.contextStack=s.contextStack,e.descriptor=t.descriptor,e.index=t.index||0,e.priority=s.priority,s.parentNode&&(e.parentNode=s.parentNode),e.type=t.descriptor.t,t.descriptor.r&&(s.indexRefs&&s.indexRefs[t.descriptor.r]!==undefined?(i=s.indexRefs[t.descriptor.r],e.indexRef=t.descriptor.r,e.value=i,e.render(e.value)):(n=S(e.root,t.descriptor.r,e.contextStack),n?e.resolve(n):(e.ref=t.descriptor.r,e.root._pendingResolution[e.root._pendingResolution.length]=e,e.descriptor.n&&e.render(!1)))),t.descriptor.x&&(e.expressionResolver=new rt(e))},lt=function(){var e;e=this.root.get(this.keypath,!0),A(e,this.value)||(this.render(e),this.value=e)},ct=function(e){this.keypath=e,v(this),this.update(),this.expressionResolver&&(this.expressionResolver=null)},function(){var e,t,n,r;dt=function(e,i){var s;s={descriptor:e.descriptor.f,root:e.root,parentNode:e.parentNode,owner:e};if(e.descriptor.n){r(e,i,!0,s);return}C(i)?t(e,i,s):k(i)?n(e,s):r(e,i,!1,s)},t=function(e,t,n){var r,i;if(t.length<e.length){i=e.fragments.splice(t.length,e.length-t.length);while(i.length)i.pop().teardown(!0)}else if(t.length>e.length)for(r=e.length;r<t.length;r+=1)n.contextStack=e.contextStack.concat(e.keypath+"."+r),n.index=r,e.descriptor.i&&(n.indexRef=e.descriptor.i),e.fragments[r]=e.createFragment(n);e.length=t.length},n=function(e,t){e.length||(t.contextStack=e.contextStack.concat(e.keypath),t.index=0,e.fragments[0]=e.createFragment(t),e.length=1)},r=function(e,t,n,r){var i,s,o;s=C(t)&&t.length===0,n?i=s||!t:i=t&&!s;if(i){e.length||(r.contextStack=e.contextStack,r.index=0,e.fragments[0]=e.createFragment(r),e.length=1);if(e.length>1){o=e.fragments.splice(1);while(o.length)o.pop().teardown(!0)}}else e.length&&(e.teardownFragments(!0),e.length=0)}}(),Et=function(e){var t,n,r,i;for(t=0;t<e.length;t+=1){n=e[t],r=e[t-1],i=e[t+1];if(n.mustacheType===Dt||n.mustacheType===Pt)e.splice(t,1),r&&i&&r.type===Nt&&i.type===Nt&&(r.value+=i.value,e.splice(t,1)),t-=1}return e},St=function(e){var t,n,r;r="";while(e.length){t=e.indexOf("<!--"),n=e.indexOf("-->");if(t===-1&&n===-1){r+=e;break}if(t!==-1&&n===-1)throw"Illegal HTML - expected closing comment sequence ('-->')";if(n!==-1&&t===-1||n<t)throw"Illegal HTML - unexpected closing comment sequence ('-->')";r+=e.substr(0,t),e=e.substring(n+3)}return r},xt=function(e){var t,n,r,i,s,o;s=/^\s*\r?\n/,o=/\r?\n\s*$/;for(t=2;t<e.length;t+=1)n=e[t],r=e[t-1],i=e[t-2],n.type===Nt&&r.type===Ht&&i.type===Nt&&o.test(i.value)&&s.test(n.value)&&(r.mustacheType!==Ct&&r.mustacheType!==kt&&(i.value=i.value.replace(o,"\n")),n.value=n.value.replace(s,""),n.value===""&&e.splice(t--,1));return e},function(e){var t=function(e,t,n){var r;if(typeof t!="string"||!L(n)){if(e.debug)throw new Error("Bad arguments");return}r=e.get(t),r===undefined&&(r=0);if(!L(r)){if(e.debug)throw new Error("Cannot add to a non-numeric value");return}e.set(t,r+n)};e.add=function(e,n){t(this,e,n===undefined?1:n)},e.subtract=function(e,n){t(this,e,n===undefined?-1:-n)},e.toggle=function(e){var t;if(typeof e!="string"){if(this.debug)throw new Error("Bad arguments");return}t=this.get(e),this.set(e,!t)}}(r),function(e){var n,r;e.animate=function(e,t,r){var i,s,o;if(typeof e=="object"){r=t||{},o=[];for(i in e)R.call(e,i)&&(o[o.length]=n(this,i,e[i],r));return{stop:function(){while(o.length)o.pop().stop()}}}return r=r||{},s=n(this,e,t,r),{stop:function(){s.stop()}}},r={stop:U},n=function(e,n,i,s){var o,u,a,f,l,c;c=e.get(n),f=vt.animations.length;while(f--)vt.animations[f].keypath===n&&vt.animations[f].stop();return A(c,i)?(s.complete&&s.complete(1,s.to),r):(s.easing&&(typeof s.easing=="function"?o=s.easing:e.easing&&e.easing[s.easing]?o=e.easing[s.easing]:o=t.easing[s.easing],typeof o!="function"&&(o=null)),u=s.duration===undefined?400:s.duration,a=new st({keypath:n,from:c,to:i,root:e,duration:u,easing:o,step:s.step,complete:s.complete}),vt.push(a),e._animations[e._animations.length]=a,a)}}(r),r.bind=function(e){var t=this._bound;t.indexOf(e)===-1&&(t[t.length]=e,e.init(this))},r.cancelFullscreen=function(){t.cancelFullscreen(this.el)},r.find=function(e){return this.el?this.el.querySelector(e):null},r.findAll=function(e){return this.el?this.el.querySelectorAll(e):[]},r.fire=function(e){var t,n,r,i=this._subs[e];if(!i)return;t=Array.prototype.slice.call(arguments,1);for(n=0,r=i.length;n<r;n+=1)i[n].apply(this,t)},r.get=function(e,t){var n,r,i,s,o,u,a,f,l;if(!e)return this.data;n=this._cache;if(C(e)){if(!e.length)return this.data;i=e.slice(),s=i.join("."),l=!0}else{if(R.call(n,e)&&n[e]!==tn)return n[e];i=T(e),s=i.join(".")}if(R.call(n,s)&&n[s]!==tn)if(n[s]!==undefined||!l)return n[s];if(this._evaluators[s])return f=this._evaluators[s].value,n[s]=f,f;o=i.pop(),u=i.join("."),a=i.length?this.get(i):this.data;if(a===null||typeof a!="object"||a===tn)return;return(r=this._cacheMap[u])?r.indexOf(s)===-1&&(r[r.length]=s):this._cacheMap[u]=[s],f=a[o],this.modifyArrays&&s.charAt(0)!=="("&&C(f)&&(!f._ractive||!f._ractive.setting)&&mt(f,s,this),n[s]=f,f},d=function(e,t){var n,r,i,s;e.modifyArrays&&t.charAt(0)!=="("&&(n=e._cache[t],C(n)&&!n._ractive.setting&&gt(n,t,e)),e._cache[t]=tn;if(s=e._cacheMap[t])while(s.length)d(e,s.pop())},g=function(e,t,n){var r;for(r=0;r<e._deps.length;r+=1)b(e,t,r,n)},b=function(e,t,n,r){var i,s,o,u,a;i=e._deps[n];if(!i)return;s=i[t];if(s){o=s.length;while(o--)s[o].update()}if(r)return;a=e._depsMap[t];if(a){o=a.length;while(o--)b(e,a[o],n)}},y=function(e,t,n){var r,i,s;s=t.length;for(r=0;r<e._deps.length;r+=1)if(e._deps[r]){i=s;while(i--)b(e,t[i],r,n)}},x=function(e){var t,n;while(e._defEvals.length)t=e._defEvals.pop(),t.update().deferred=!1;while(e._defAttrs.length)n=e._defAttrs.pop(),n.update().deferred=!1;while(e._defSelectValues.length)n=e._defSelectValues.pop(),n.parentNode.value=n.value,n.value=n.parentNode.value},v=function(e){var t,n,r,i,s,o,u,a;o=e.root,u=e.keypath,a=e.priority,t=o._deps[a]||(o._deps[a]={}),n=t[u]||(t[u]=[]),n[n.length]=e,r=T(u);while(r.length)r.pop(),i=r.join("."),s=o._depsMap[i]||(o._depsMap[i]=[]),s[u]===undefined&&(s[u]=0,s[s.length]=u),s[u]+=1,u=i},at=function(e,t){var n,r;n=t.el?O(t.el):e.el,n&&!t.append&&(n.innerHTML=""),e._transitionManager=r=H(e,t.complete),e.fragment=new W({descriptor:e.template,root:e,owner:e,parentNode:n}),x(e),n&&n.appendChild(e.fragment.docFrag),e._transitionManager=null,r.ready()},S=function(e,t,n){var r,i,s,o,u,a;if(t===".")return n[n.length-1];if(t.charAt(0)===".")return n[n.length-1]+t;r=T(t),i=r.pop(),n=n.concat();while(n.length){s=n.pop(),o=T(s),u=e.get(o.concat(r));if(typeof u=="object"&&u!==null&&R.call(u,i)){a=s+"."+t;break}}return!a&&e.get(t)!==undefined&&(a=t),a},p=function(e){if(!e.keypath){var t=e.root._pendingResolution.indexOf(e);t!==-1&&e.root._pendingResolution.splice(t,1)}else m(e)},m=function(e){var t,n,r,i,s,o,u,a,f,l;a=e.root,f=e.keypath,l=e.priority,t=a._deps[l][f],t.splice(t.indexOf(e),1),i=T(f);while(i.length)i.pop(),s=i.join("."),o=a._depsMap[s],o[f]-=1,o[f]||(o.splice(o.indexOf(f),1),o[f]=undefined),f=s},r.link=function(e){var t=this;return function(n){t.set(e,n)}},function(e){var t,n,r;e.observe=function(e,n,r){var i=[],s;if(typeof e=="object"){r=n;for(s in e)R.call(e,s)&&(n=e[s],i[i.length]=t(this,s,n,r));return{cancel:function(){while(i.length)i.pop().cancel()}}}return t(this,e,n,r)},t=function(e,t,r,i){var s;return s=new n(e,t,r,i),(!i||i.init!==!1)&&s.update(!0),v(s),{cancel:function(){m(s)}}},n=function(e,t,n,r){this.root=e,this.keypath=t,this.callback=n,this.priority=0,this.context=r&&r.context?r.context:e},n.prototype={update:function(e){var t;t=this.root.get(this.keypath,!0);if(!A(t,this.value)||e){try{this.callback.call(this.context,t,this.value)}catch(n){if(this.root.debug)throw n}this.value=t}}}}(r),r.off=function(e,t){var n,r;t||(e?this._subs[e]=[]:this._subs={}),n=this._subs[e],n&&(r=n.indexOf(t),r!==-1&&n.splice(r,1))},r.on=function(e,t){var n=this,r,i;if(typeof e=="object"){r=[];for(i in e)R.call(e,i)&&(r[r.length]=this.on(i,e[i]));return{cancel:function(){while(r.length)r.pop().cancel()}}}return this._subs[e]?this._subs[e].push(t):this._subs[e]=[t],{cancel:function(){n.off(e,t)}}},r.renderHTML=function(){return this.fragment.toString()},r.requestFullscreen=function(){t.requestFullscreen(this.el)},function(e){var t,n;e.set=function(e,r,i){var s,o,u,a,f,l,c,h;o=[""],s=[],k(e)&&(i=r),c=this._transitionManager,this._transitionManager=h=H(this,i);if(k(e))for(u in e)R.call(e,u)&&(f=T(u),a=f.join("."),r=e[u],t(this,a,f,r,s,o));else f=T(e),a=f.join("."),t(this,a,f,r,s,o);return s.length&&this._pendingResolution.length&&n(this),o.length&&y(this,o,!0),s.length&&y(this,s),x(this),this._transitionManager=c,h.ready(),this.setting||(this.setting=!0,typeof e=="object"?this.fire("set",e):this.fire("set",e,r),this.setting=!1),this},t=function(e,t,n,r,i,s){var o,u,a,f,l,c;f=n.slice(),l=[],o=e.get(t);if(o!==r){a=e.data;while(n.length>1)u=l[l.length]=n.shift(),a[u]||(c||(c=l.join(".")),a[u]=/^\s*[0-9]+\s*$/.test(n[0])?[]:{}),a=a[u];u=n[0],a[u]=r}else if(typeof r!="object")return;d(e,c||t),i[i.length]=t;while(f.length>1)f.pop(),t=f.join("."),s.indexOf(t)===-1&&(s[s.length]=t)},n=function(e){var t,n,r;t=e._pendingResolution.length;while(t--)n=e._pendingResolution.splice(t,1)[0],(r=S(e,n.ref,n.contextStack))?n.resolve(r):e._pendingResolution[e._pendingResolution.length]=n}}(r),r.teardown=function(e){var t,n,r;this.fire("teardown"),r=this._transitionManager,this._transitionManager=n=H(this,e),this.fragment.teardown(!0);while(this._animations[0])this._animations[0].stop();for(t in this._cache)d(this,t);while(this._bound.length)this.unbind(this._bound.pop());this._transitionManager=r,n.ready()},r.toggleFullscreen=function(){t.isFullscreen(this.el)?this.cancelFullscreen():this.requestFullscreen()},r.unbind=function(e){var t=this._bound,n;n=t.indexOf(e),n!==-1&&(t.splice(n,1),e.teardown(this))},r.update=function(e,t){var n,r;return typeof e=="function"&&(t=e),r=this._transitionManager,this._transitionManager=n=H(this,t),d(this,e||""),g(this,e||""),x(this),this._transitionManager=r,n.ready(),typeof e=="string"?this.fire("update",e):this.fire("update"),this},s.backbone=function(e,t){var n,r,i,s,o,u,a;return t&&(t+=".",o=new RegExp("^"+t.replace(/\./g,"\\.")),u=t.length),{init:function(f){t?(a=function(e){var n,r;r={};for(n in e)R.call(e,n)&&(r[t+n]=e[n]);return r},s=function(e){n||(r=!0,f.set(a(e.changed)),r=!1)},i=function(t,i){r||o.test(t)&&(n=!0,e.set(t.substring(u),i),n=!1)}):(s=function(e){n||(r=!0,f.set(e.changed),r=!1)},i=function(t,i){r||(n=!0,e.set(t,i),n=!1)}),e.on("change",s),f.on("set",i),f.set(t?a(e.attributes):e.attributes)},teardown:function(t){e.off("change",s),t.off("set",i)}}},s.statesman=function(e,t){var n,r,i,s,o,u,a;return t&&(t+=".",o=new RegExp("^"+t.replace(/\./g,"\\.")),u=t.length,a=function(e){var n,r;if(!e)return;r={};for(n in e)R.call(e,n)&&(r[t+n]=e[n]);return r}),{init:function(f){var l;t?(s=function(e){n||(r=!0,e=a(e),f.set(e),r=!1)},f.twoway&&(i=function(t,i){r||o.test(t)&&(n=!0,e.set(t.substring(u),i),n=!1)})):(s=function(e){n||(r=!0,f.set(e),r=!1)},f.twoway&&(i=function(t,i){r||(n=!0,e.set(t,i),n=!1)})),e.on("change",s),f.twoway&&f.on("set",i),l=t?a(e.get()):e.get(),l&&f.set(t?a(e.get()):e.get())},teardown:function(t){e.off("change",s),t.off("set",i)}}},u={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}},o.hover=function(e,t){var n,r;return n=function(n){t({node:e,original:n,hover:!0})},r=function(n){t({node:e,original:n,hover:!1})},e.addEventListener("mouseover",n),e.addEventListener("mouseout",r),{teardown:function(){e.removeEventListener("mouseover",n),e.removeEventListener("mouseout",r)}}},function(){var e=function(e){return function(t,n){var r;return t.addEventListener("keydown",r=function(r){var i=r.which||r.keyCode;i===e&&(r.preventDefault(),n({node:t,original:r}))}),{teardown:function(){t.removeEventListener(r)}}}};o.enter=e(13),o.tab=e(9),o.escape=e(27),o.space=e(32)}(),o.tap=function(e,t){var r,i,s,o;return s=5,o=400,r=function(e){var r,i,u,a,f,l;if(e.which!=1)return;i=e.clientX,u=e.clientY,r=this,a=function(e){t({node:r,original:e}),l()},f=function(e){(Math.abs(e.clientX-i)>=s||Math.abs(e.clientY-u)>=s)&&l()},l=function(){n.removeEventListener("mousemove",f),n.removeEventListener("click",a)},n.addEventListener("mousemove",f),n.addEventListener("click",a),setTimeout(l,o)},e.addEventListener("mousedown",r),i=function(e){var n,r,i,u,a,f,l,c;if(e.touches.length!==1)return;u=e.touches[0],r=u.clientX,i=u.clientY,n=this,a=u.identifier,l=function(e){var r;r=e.changedTouches[0],r.identifier!==a&&c(),e.preventDefault(),t({node:n,original:e}),c()},f=function(e){var t;(e.touches.length!==1||e.touches[0].identifier!==a)&&c(),t=e.touches[0],(Math.abs(t.clientX-r)>=s||Math.abs(t.clientY-i)>=s)&&c()},c=function(){window.removeEventListener("touchmove",f),window.removeEventListener("touchend",l),window.removeEventListener("touchcancel",c)},window.addEventListener("touchmove",f),window.addEventListener("touchend",l),window.addEventListener("touchcancel",c),setTimeout(c,o)},e.addEventListener("touchstart",i),{teardown:function(){e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",i)}}},function(){var e,r,i,s,o,u,f,l,c,h,p,d,v;a=function(e){var n,r,i,o,a,p,d;return n=this,r=function(e){h(this,r,e||{})},r.prototype=I(n.prototype),n!==t&&s(r,n),u(r,e),f(r),l(r,e),c(r),r.extend=n.extend,r},p=["data","partials","transitions","eventDefinitions"],d=["el","template","complete","modifyArrays","twoway","lazy","append","preserveWhitespace","sanitize","noIntro","transitionsEnabled"],v=p.concat(d),s=function(e,t){p.forEach(function(n){t[n]&&(e[n]=r(t[n]))}),d.forEach(function(n){t[n]!==undefined&&(e[n]=t[n])})},o=function(e,t){return/_super/.test(e)?function(){var n=this._super,r;return this._super=t,r=e.apply(this,arguments),this._super=n,r}:e},u=function(e,t){var n,r;p.forEach(function(n){var r=t[n];r&&(e[n]?i(e[n],r):e[n]=r)}),d.forEach(function(n){t[n]!==undefined&&(e[n]=t[n])});for(n in t)R.call(t,n)&&!R.call(e.prototype,n)&&v.indexOf(n)===-1&&(r=t[n],typeof r=="function"&&typeof e.prototype[n]=="function"?e.prototype[n]=o(r,e.prototype[n]):e.prototype[n]=r)},f=function(e){var r;if(typeof e.template=="string"){if(!t.parse)throw new Error(Tt);if(e.template.charAt(0)==="#"&&n){r=n.getElementById(e.template.substring(1));if(!r||r.tagName!=="SCRIPT")throw new Error("Could not find template element ("+e.template+")");e.template=t.parse(r.innerHTML,e)}else e.template=t.parse(e.template,e)}},l=function(e,t){k(e.template)&&(e.partials||(e.partials={}),i(e.partials,e.template.partials),t.partials&&i(e.partials,t.partials),e.template=e.template.template)},c=function(e){var n,r;if(e.partials)for(n in e.partials)if(R.call(e.partials,n)){if(typeof e.partials[n]=="string"){if(!t.parse)throw new Error(Tt);r=t.parse(e.partials[n],e)}else r=e.partials[n];e.partials[n]=r}},h=function(n,i,s){var o,u,a;!s.template&&i.template&&(s.template=i.template),p.forEach(function(t){s[t]?e(s[t],i[t]):i[t]&&(s[t]=r(i[t]))}),d.forEach(function(e){s[e]===undefined&&i[e]!==undefined&&(s[e]=i[e])}),n.beforeInit&&n.beforeInit.call(n,s),t.call(n,s),n.init&&n.init.call(n,s)},e=function(e,t){var n;for(n in t)R.call(t,n)&&!R.call(e,n)&&(e[n]=t[n])},r=function(e){var t={},n;for(n in e)R.call(e,n)&&(t[n]=e[n]);return t},i=function(e,t){var n;for(n in t)R.call(t,n)&&(e[n]=t[n])}}(),l=function(e,n){return L(e)&&L(n)?t.interpolators.number(+e,+n):C(e)&&C(n)?t.interpolators.array(e,n):k(e)&&k(n)?t.interpolators.object(e,n):function(){return n}},c={number:function(e,t){var n=t-e;return n?function(t){return e+t*n}:function(){return e}},array:function(e,n){var r,i,s,o;r=[],i=[],o=s=Math.min(e.length,n.length);while(o--)i[o]=t.interpolate(e[o],n[o]);for(o=s;o<e.length;o+=1)r[o]=e[o];for(o=s;o<n.length;o+=1)r[o]=n[o];return function(e){var t=s;while(t--)r[t]=i[t](e);return r}},object:function(e,n){var r=[],i,s,o,u;o={},s={};for(u in e)R.call(e,u)&&(R.call(n,u)?(r[r.length]=u,s[u]=t.interpolate(e[u],n[u])):o[u]=e[u]);for(u in n)R.call(n,u)&&!R.call(e,u)&&(o[u]=n[u]);return i=r.length,function(e){var t=i,n;while(t--)n=r[t],o[n]=s[n](e);return o}}};var cn=q();F(cn,{preserveWhitespace:{enumerable:!0,value:!1},append:{enumerable:!0,value:!1},twoway:{enumerable:!0,value:!0},modifyArrays:{enumerable:!0,value:!0},data:{enumerable:!0,value:{}},lazy:{enumerable:!0,value:!1},debug:{enumerable:!0,value:!1},transitions:{enumerable:!0,value:{}},eventDefinitions:{enumerable:!0,value:{}},noIntro:{enumerable:!0,value:!1},transitionsEnabled:{enumerable:!0,value:!0}}),t=function(e){var r,i,s,o,u,a;for(r in cn)R.call(e,r)||(e[r]=typeof cn[r]=="object"?{}:cn[r]);F(this,{_guid:{value:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e=="x"?t:t&3|8,n.toString(16)})},_subs:{value:q()},_cache:{value:{}},_cacheMap:{value:q()},_deps:{value:[]},_depsMap:{value:q()},_pendingResolution:{value:[]},_defAttrs:{value:[]},_defEvals:{value:[]},_defSelectValues:{value:[]},_proxies:{value:q()},_customProxies:{value:q()},_evaluators:{value:q()},_bound:{value:[]},_transitionManager:{value:null,writable:!0},_animations:{value:[]},nodes:{value:{}}}),this.modifyArrays=e.modifyArrays,this.twoway=e.twoway,this.lazy=e.lazy,this.debug=e.debug;if(e.el){this.el=O(e.el);if(!this.el&&this.debug)throw new Error("Could not find container element")}this.data=e.data||{},this.partials={},this.transitions=e.transitions,this.eventDefinitions=e.eventDefinitions;if(e.bindings)if(C(e.bindings))for(s=0;s<e.bindings.length;s+=1)this.bind(e.bindings[s]);else this.bind(e.bindings);o=e.template;if(typeof o=="string"){if(!t.parse)throw new Error(Tt);if(o.charAt(0)==="#"&&n){u=n.getElementById(o.substring(1));if(!u)throw new Error("Could not find template element ("+o+")");a=t.parse(u.innerHTML,e)}else a=t.parse(o,e)}else a=o;k(a)&&(this.partials=a.partials,a=a.template),a&&a.length===1&&typeof a[0]=="string"&&(a=a[0]),this.template=a;if(e.partials)for(r in e.partials)if(R.call(e.partials,r)){i=e.partials[r];if(typeof i=="string"){if(!t.parse)throw new Error(Tt);i=t.parse(i,e)}this.partials[r]=i}for(r in this.partials)R.call(this.partials,r)&&this.partials[r].length===1&&typeof this.partials[r][0]=="string"&&(this.partials[r]=this.partials[r][0]);this.transitionsEnabled=e.noIntro?!1:e.transitionsEnabled,at(this,{el:this.el,append:e.append,complete:e.complete}),this.transitionsEnabled=e.transitionsEnabled},function(){var e,t,r,i,s,o,a,f;if(!n)return;e=function(e,t){var n={},r;r=t.length;while(r--)n[t[r]]=e[t[r]];return n},t=function(e,t,n,r){var i=t.length,s;while(i--)s=t[i],n&&n[s]?typeof n[s]=="function"?e.style[s]=n[s](r):e.style[s]=n[s]:e.style[s]=0},r=function(e,t){var n;if(!t)return e;for(n in t)R.call(t,n)&&(e[n]=t[n]);return e},an&&(i=function(n,i,s,o){return typeof n=="string"&&(n=[n]),function(a,f,l,c,h){var p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;l=hn(l),E=l.duration||i.duration,u=un(l.easing||i.easing),S=(l.delay||i.delay||0)+(l.stagger||i.stagger||0)*c.i,x=h?s:o,T=h?o:s,v=window.getComputedStyle(a),y=a.getAttribute("style"),h?(k=a.style.position,L=a.style.visibility,a.style.position="absolute",a.style.visibility="hidden",setTimeout(function(){var i,u;m=e(v,n),x=s,T=r(m,o),a.style.position=k,a.style.visibility=L,t(a,n,x,l),setTimeout(g,0)},S)):setTimeout(function(){var i,u;m=e(v,n),x=r(m,o),T=s,t(a,n,x,l),setTimeout(g,0)},S),g=function(){var e,r;a.style[fn+"Duration"]=E/1e3+"s",a.style[fn+"Properties"]=n.map(un).join(","),a.style[fn+"TimingFunction"]=u,p=function(e){a.removeEventListener(ln,p),h&&a.setAttribute("style",y||""),f()},a.addEventListener(ln,p),t(a,n,T,l)}}},h.slide=i(["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","overflowY"],{duration:400,easing:"easeInOut"},{overflowY:"hidden"},{overflowY:"hidden"}),h.fade=i("opacity",{duration:300,easing:"linear"}),h.fly=i(["opacity","left","position"],{duration:400,easing:"easeOut"},{position:"relative",left:"-500px"},{position:"relative",left:0}))}();var hn=function(e){return e==="fast"?{duration:200}:e==="slow"?{duration:600}:L(e)?{duration:+e}:e||{}};(function(e){var t,r,i;if(!n)return;r=function(e,t,n){var s,o,u;e.nodeType===1&&(e.style.display=e._display);if(e.nodeType===3){i(e,t,n);return}s=Array.prototype.slice.call(e.childNodes),o=function(){if(!s.length){e.nodeType===1&&e.setAttribute("style",e._style||""),t();return}r(s.shift(),o,n)},o()},i=function(e,t,n){var r,i,s,o;r=e._hiddenData,i=r.length;if(!i){t();return}o=0,s=setInterval(function(){var n,u,a,f,l;n=r.substr(0,o),u=r.substring(o),a=/^\w+/.exec(u),f=a?a[0].length:0,l=(new Array(f+1)).join(" "),e.data=n+l,o===i&&(clearInterval(s),delete e._hiddenData,t()),o+=1},n)},t=function(e,t,n,i,s){var o,u,a,f;n=hn(n),o=n.interval||(n.speed?1e3/n.speed:n.duration?e.textContent.length/n.duration:4),u=e.getAttribute("style"),a=window.getComputedStyle(e),e.style.visibility="hidden",setTimeout(function(){var i,s,l;s=a.width,i=a.height,l=a.visibility,f(e),setTimeout(function(){e.style.width=s,e.style.height=i,e.style.visibility="visible",r(e,function(){e.setAttribute("style",u||""),t()},o)},n.delay||0)}),f=function(e){var t,n;e.nodeType===1&&(e._style=e.getAttribute("style"),e._display=window.getComputedStyle(e).display,e.style.display="none");if(e.nodeType===3){e._hiddenData=""+e.data,e.data="";return}t=Array.prototype.slice.call(e.childNodes),n=t.length;while(n--)f(t[n])}},e.typewriter=t})(h),function(e){var t,r,i;if(!n)return;e.fullscreenEnabled=n.fullscreenEnabled||n.mozFullScreenEnabled||n.webkitFullscreenEnabled;if(!e.fullscreenEnabled){e.requestFullscreen=e.cancelFullscreen=U;return}nn.requestFullscreen?t="requestFullscreen":nn.mozRequestFullScreen?t="mozRequestFullScreen":nn.webkitRequestFullscreen&&(t="webkitRequestFullscreen"),e.requestFullscreen=function(e){e[t]&&e[t]()},n.cancelFullscreen?r="cancelFullscreen":n.mozCancelFullScreen?r="mozCancelFullScreen":n.webkitCancelFullScreen&&(r="webkitCancelFullScreen"),e.cancelFullscreen=function(){n[r]()},n.fullscreenElement!==undefined?i="fullscreenElement":n.mozFullScreenElement!==undefined?i="mozFullScreenElement":n.webkitFullscreenElement!==undefined&&(i="webkitFullscreenElement"),e.isFullscreen=function(e){return e===n[i]}}(t),st=function(e){var n;this.startTime=Date.now();for(n in e)R.call(e,n)&&(this[n]=e[n]);this.interpolator=t.interpolate(this.from,this.to),this.running=!0},st.prototype={tick:function(){var e,t,n,r,i;return this.running?(r=Date.now(),e=r-this.startTime,e>=this.duration?(this.root.set(this.keypath,this.to),this.step&&this.step(1,this.to),this.complete&&this.complete(1,this.to),i=this.root._animations.indexOf(this),i===-1&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(i,1),this.running=!1,!1):(t=this.easing?this.easing(e/this.duration):e/this.duration,n=this.interpolator(t),this.root.set(this.keypath,n),this.step&&this.step(t,n),!0)):!1},stop:function(){var e;this.running=!1,e=this.root._animations.indexOf(this),e===-1&&console&&console.warn&&console.warn("Animation was not found"),this.root._animations.splice(e,1)}},vt={animations:[],tick:function(){var e,t;for(e=0;e<this.animations.length;e+=1)t=this.animations[e],t.tick()||this.animations.splice(e--,1);this.animations.length?B(this.boundTick):this.running=!1},boundTick:function(){vt.tick()},push:function(e){this.animations[this.animations.length]=e,this.running||(this.running=!0,this.tick())}},function(e,t,n){var r,i;if(n.requestAnimationFrame){B=n.requestAnimationFrame;return}for(r=0;r<e.length&&!B;++r)B=n[e[r]+"RequestAnimationFrame"];B||(i=n.setTimeout,B=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}(["ms","moz","webkit","o"],0,e),function(){var e,t,n,r,i,s;mt=function(e,n,r){var i,s,o,u;e._ractive?(i=e._ractive.roots,s=e._ractive.keypathsByGuid,s[r._guid]||(i[i.length]=r,s[r._guid]=[]),u=s[r._guid],u.indexOf(n)===-1&&(u[u.length]=n)):(j(e,"_ractive",{value:{roots:[r],keypathsByGuid:{}},configurable:!0}),e._ractive.keypathsByGuid[r._guid]=[n],t(e))},gt=function(e,t,r){var i,s,o,u,a;if(!e._ractive)throw new Error("Attempted to remove keypath from non-wrapped array. This error is unexpected - please send a bug report to @rich_harris");i=e._ractive.roots,s=e._ractive.keypathsByGuid;if(!s[r._guid])throw new Error("Ractive instance was not listed as a dependent of this array. This error is unexpected - please send a bug report to @rich_harris");u=s[r._guid],a=u.indexOf(t);if(a===-1)throw new Error("Attempted to unlink non-linked keypath from array. This error is unexpected - please send a bug report to @rich_harris");u.splice(a,1),u.length||(i.splice(i.indexOf(r),1),s[r._guid]=null),i.length||n(e)},e=function(e,t,n){var r,i,s,o,u,a,f;f=e._ractive.keypathsByGuid,r=function(e){var t=e.length;while(t--)i(e[t])},i=function(e){var t=e._transitionManager,n;e._transitionManager=n=H(e,U),s(e,f[e._guid]),e._transitionManager=t,n.ready()},s=function(e,t){var n=t.length;while(n--)o(e,t[n])},o=function(r,i){var s,o,u,f,l,c,h,p,v;if(t==="sort"||t==="reverse"){r.set(i,e);return}d(r,i),l=[],c=[];for(h=0;h<r._deps.length;h+=1){s=r._deps[h];if(!s)continue;o=s[i];if(o){a(r,i,o,l,c),x(r);while(l.length)l.pop().smartUpdate(t,n);while(c.length)c.pop().update()}}x(r),f=[],u=T(i);while(u.length)u.pop(),f[f.length]=u.join(".");y(r,f,!0),g(r,i+".length",!0)},a=function(e,t,n,r,i){var s,o;s=n.length;while(s--)o=n[s],o.type===$t?o.update():o.keypath===t&&o.type===Lt?r[r.length]=o:i[i.length]=o},r(e._ractive.roots)},r=[],s=["pop","push","reverse","shift","sort","splice","unshift"],s.forEach(function(t){var n=function(){var n=Array.prototype[t].apply(this,arguments);return this._ractive.setting=!0,e(this,t,arguments),this._ractive.setting=!1,n};j(r,t,{value:n})}),i={},i.__proto__?(t=function(e){e.__proto__=r},n=function(e){delete e._ractive,e.__proto__=Array.prototype}):(t=function(e){var t,n;t=s.length;while(t--)n=s[t],j(e,n,{value:r[n],configurable:!0})},n=function(e){var t;t=s.length;while(t--)delete e[s[t]];delete e._ractive})}(),function(){var e,t,n,r,i,s;e={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},V=function(e){t(this,e.name);if(e.value===null||typeof e.value=="string"){n(this,e);return}this.root=e.root,this.element=e.element,this.parentNode=e.parentNode,this.lcName=this.name.toLowerCase(),this.parentFragment=this.element.parentFragment,this.fragment=new Y({descriptor:e.value,root:this.root,owner:this,contextStack:e.contextStack});if(!this.parentNode)return;r(this,e),this.selfUpdating=i(this),this.isBindable=s(this),this.ready=!0},V.prototype={bind:function(e){var t=this,n=this.parentNode,r,i,s,o,u,a,f;if(!this.fragment)return!1;if(this.fragment.items.length!==1||this.fragment.items[0].type!==Ct||!this.fragment.items[0].keypath&&!this.fragment.items[0].ref)return this.root.debug&&console&&console.warn&&console.warn("Not a valid two-way data binding candidate - must be a single interpolator:",this.fragment.items),!1;this.interpolator=this.fragment.items[0],this.keypath=this.interpolator.keypath||this.interpolator.descriptor.r;if(n.tagName==="SELECT"&&this.propertyName==="value"){o=n.getElementsByTagName("option"),f=o.length;for(a=0;a<f;a+=1){u=o[a];if(u.hasAttribute("selected")){this.root.set(this.keypath,u.value);break}}this.isMultipleSelect=n.multiple}n.type==="checkbox"||n.type==="radio"?this.propertyName==="name"?(n.name="{{"+this.keypath+"}}",this.updateViewModel=function(){n.checked&&t.root.set(t.keypath,n.value)}):this.propertyName==="checked"&&(this.updateViewModel=function(){t.root.set(t.keypath,n.checked)}):this.isMultipleSelect?this.updateViewModel=function(e){var r,i,s,o,u;window.attr=t,o=t.value||[],r=[],i=n.querySelectorAll("option:checked"),f=i.length;for(s=0;s<f;s+=1)r[r.length]=i[s].value;u=f!==o.length,s=r.length;while(s--)r[s]!==o[s]&&(u=!0);if(u=!0)t.value=r,t.root.set(t.keypath,r)}:this.updateViewModel=function(){var e;e=n.value,e==="0"?e=0:e!==""&&(e=+e||e),t.root.set(t.keypath,e)};if(this.updateViewModel){this.twoway=!0,this.boundEvents=["change"],e||(this.boundEvents.push("input"),n.attachEvent&&this.boundEvents.push("keyup")),n.attachEvent&&n.type==="checkbox"&&this.boundEvents.push("click"),a=this.boundEvents.length;while(a--)n.addEventListener(this.boundEvents[a],this.updateViewModel)}},updateBindings:function(){this.keypath=this.interpolator.keypath||this.interpolator.r,this.propertyName==="name"&&(this.parentNode.name="{{"+this.keypath+"}}")},teardown:function(){var e;if(this.boundEvents){e=this.boundEvents.length;while(e--)this.parentNode.removeEventListener(this.boundEvents[e],this.updateViewModel)}this.fragment&&this.fragment.teardown()},bubble:function(){this.selfUpdating?this.update():!this.deferred&&this.ready&&(this.root._defAttrs[this.root._defAttrs.length]=this,this.deferred=!0)},update:function(){var e,t,n,r;if(!this.ready)return this;if(this.isMultipleSelect){e=this.fragment.getValue(),typeof e=="string"&&(e=[e]);if(C(e)){n=this.parentNode.querySelectorAll("option"),r=n.length;while(r--)n[r].selected=e.indexOf(n[r].value)!==-1}return this.value=e,this}if(this.twoway){t=this.lcName,e=this.interpolator.value;if(t==="name"&&(this.parentNode.type==="checkbox"||this.parentNode.type==="radio"))return e===this.parentNode.value?this.parentNode.checked=!0:this.parentNode.checked=!1,this}e=this.fragment.getValue(),e===undefined&&(e="");if(e!==this.value){if(this.useProperty)return this.element.descriptor.e==="select"&&this.propertyName==="value"?(this.value=e,this.root._defSelectValues.push(this),this):(this.parentNode[this.propertyName]=e,this.value=e,this);if(this.namespace)return this.parentNode.setAttributeNS(this.namespace,this.name,e),this.value=e,this;this.lcName==="id"&&(this.value!==undefined&&(this.root.nodes[this.value]=undefined),this.root.nodes[e]=this.parentNode),this.parentNode.setAttribute(this.name,e),this.value=e}return this},toString:function(){var e;return this.value===null?this.name:this.fragment?(e=this.fragment.toString(),this.name+"="+JSON.stringify(e)):this.name+"="+JSON.stringify(this.value)}},t=function(e,t){var n,r;n=t.indexOf(":");if(n!==-1){r=t.substr(0,n);if(r!=="xmlns"){t=t.substring(n+1),e.name=t,e.namespace=rn[r];if(!e.namespace)throw'Unknown namespace ("'+r+'")';return}}e.name=t},n=function(e,t){t.parentNode&&(e.namespace?t.parentNode.setAttributeNS(e.namespace,t.name,t.value):t.parentNode.setAttribute(t.name,t.value),t.name.toLowerCase()==="id"&&(t.root.nodes[t.value]=t.parentNode)),e.value=t.value},r=function(t,n){var r,i;if(t.parentNode&&!t.namespace&&(!n.parentNode.namespaceURI||n.parentNode.namespaceURI===rn.html)){r=t.lcName,i=e[r]||r,n.parentNode[i]!==undefined&&(t.propertyName=i);if(typeof n.parentNode[i]=="boolean"||i==="value")t.useProperty=!0}},i=function(e){var t,n,r;t=e.fragment.items.length;while(t--){n=e.fragment.items[t];if(n.type===Nt)continue;if(n.type===Ct){if(r)return!1;r=!0;continue}return!1}return!0},s=function(e){var t,n;return e.root.twoway?(t=e.element.descriptor.e.toLowerCase(),n=e.propertyName,(n==="name"||n==="value"||n==="checked")&&(t==="input"||t==="textarea"||t==="select")):!1}}(),X=function(e,t){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;this.type=Mt,r=this.parentFragment=e.parentFragment,i=this.descriptor=e.descriptor,this.root=m=r.root,this.parentNode=r.parentNode,this.index=e.index,this.eventListeners=[],this.customEventListeners=[];if(this.parentNode){if(i.a&&i.a.xmlns){s=i.a.xmlns;if(typeof s!="string")throw new Error("Namespace attribute cannot contain mustaches")}else s=i.e.toLowerCase()==="svg"?rn.svg:this.parentNode.namespaceURI;this.node=n.createElementNS(s,i.e)}i.f&&(typeof i.f=="string"&&(!this.node||!this.node.namespaceURI||this.node.namespaceURI===rn.html)?(this.html=i.f,t&&(this.node.innerHTML=this.html)):i.e==="style"&&this.node.styleSheet!==undefined?(this.fragment=new Y({descriptor:i.f,root:m,contextStack:r.contextStack,owner:this}),t&&(this.bubble=function(){this.node.styleSheet.cssText=this.fragment.toString()})):(this.fragment=new W({descriptor:i.f,root:m,parentNode:this.node,contextStack:r.contextStack,owner:this}),t&&this.node.appendChild(this.fragment.docFrag)));if(t&&i.v)for(o in i.v)if(R.call(i.v,o)){u=o.split("-"),a=u.length;while(a--)this.addEventProxy(u[a],i.v[o],r.contextStack)}this.attributes=[],p=[];for(l in i.a)R.call(i.a,l)&&(h=i.a[l],f=new V({element:this,name:l,value:h===undefined?null:h,root:m,parentNode:this.node,contextStack:r.contextStack}),this.attributes[this.attributes.length]=f,f.isBindable&&p.push(f),f.isBindable&&f.propertyName==="name"?d=f:f.update());if(t){while(p.length)p.pop().bind(this.root.lazy);d&&(d.updateViewModel&&d.updateViewModel(),d.update()),t.appendChild(this.node),i.t1&&D(i.t1,m,this,r.contextStack,!0)}},X.prototype={addEventProxy:function(e,n,r){var i=this,s=this.root,o,u,a,f,l,c,h,p,d;this.node._ractive||j(this.node,"_ractive",{value:{keypath:r.length?r[r.length-1]:"",index:this.parentFragment.indexRefs}}),typeof n=="string"?o=n:o=n.n,d=e+"="+o,n.a?u=n.a:n.d&&(a=!0,u=new Y({descriptor:n.d,root:this.root,owner:this,contextStack:r}),this.proxyFrags||(this.proxyFrags=[]),this.proxyFrags[this.proxyFrags.length]=u);if(u!==undefined){if(this.node._ractive[d])throw new Error("You cannot have two proxy events with the same trigger event ("+d+")");this.node._ractive[d]={dynamic:a,payload:u}}if(l=s.eventDefinitions[e]||t.eventDefinitions[e]){s._customProxies[d]||(s._customProxies[d]=function(e){var t,n;if(!e.node)throw new Error("Proxy event definitions must fire events with a `node` property");e.keypath=e.node._ractive.keypath,e.context=s.get(e.keypath),e.index=e.node._ractive.index,e.node._ractive[d]&&(t=e.node._ractive[d],n=t.dynamic?t.payload.toJson():t.payload),s.fire(o,e,n)}),p=s._customProxies[d],c=l(this.node,p),this.customEventListeners[this.customEventListeners.length]=c;return}this.node["on"+e]!==undefined&&s.debug&&console&&console.warn&&console.warn("Invalid event handler ("+e+")"),s._proxies[d]||(s._proxies[d]=function(e){var t,n,r={node:this,original:e,keypath:this._ractive.keypath,context:s.get(this._ractive.keypath),index:this._ractive.index};this._ractive&&this._ractive[d]&&(t=this._ractive[d],n=t.dynamic?t.payload.toJson():t.payload),s.fire(o,r,n)}),p=s._proxies[d],this.eventListeners[this.eventListeners.length]={n:e,h:p},this.node.addEventListener(e,p)},teardown:function(e){var t=this,n,r,i,s,o,u;t.fragment&&t.fragment.teardown(!1);while(t.attributes.length)t.attributes.pop().teardown();while(t.eventListeners.length)o=t.eventListeners.pop(),t.node.removeEventListener(o.n,o.h);while(t.customEventListeners.length)t.customEventListeners.pop().teardown();if(this.proxyFrags)while(this.proxyFrags.length)this.proxyFrags.pop().teardown();this.descriptor.t2&&D(this.descriptor.t2,this.root,this,this.parentFragment.contextStack,!1),e&&this.root._transitionManager.detachWhenReady(this.node)},firstNode:function(){return this.node},findNextNode:function(e){return null},bubble:function(){},toString:function(){var e,t,n,r;e="<"+this.descriptor.e,n=this.attributes.length;for(t=0;t<n;t+=1)e+=" "+this.attributes[t].toString();return e+=">",this.html?e+=this.html:this.fragment&&(e+=this.fragment.toString()),e+="</"+this.descriptor.e+">",e}},W=function(e){e.parentNode&&(this.docFrag=n.createDocumentFragment());if(typeof e.descriptor=="string"){this.html=e.descriptor,this.docFrag&&(this.nodes=M(e.descriptor,this.docFrag));return}pt(this,e)},W.prototype={createItem:function(e){if(typeof e.descriptor=="string")return new G(e,this.docFrag);switch(e.descriptor.t){case Ct:return new J(e,this.docFrag);case Lt:return new Q(e,this.docFrag);case kt:return new K(e,this.docFrag);case Mt:return new X(e,this.docFrag);case _t:return new $(e,this.docFrag);default:throw new Error("WTF? not sure what happened here...")}},teardown:function(e){var t;if(e&&this.nodes){while(this.nodes.length)t=this.nodes.pop(),t.parentNode.removeChild(t);return}if(!this.items)return;while(this.items.length)this.items.pop().teardown(e)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},findNextNode:function(e){var t=e.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?null:this.owner.findNextNode(this)},toString:function(){var e,t,n,r;if(this.html)return this.html;e="";if(!this.items)return e;n=this.items.length;for(t=0;t<n;t+=1)r=this.items[t],e+=r.toString();return e}},J=function(e,t){this.type=Ct,t&&(this.node=n.createTextNode(""),t.appendChild(this.node)),ft(this,e)},J.prototype={update:lt,resolve:ct,teardown:function(e){p(this),e&&this.parentNode.removeChild(this.node)},render:function(e){this.node&&(this.node.data=e===undefined?"":e)},firstNode:function(){return this.node},toString:function(){var e=this.value!==undefined?""+this.value:"";return e.replace("<","&lt;").replace(">","&gt;")}},$=function(e,t){var n=this.parentFragment=e.parentFragment,r;this.type=_t,this.name=e.descriptor.r,r=P(n.root,e.descriptor.r),this.fragment=new W({descriptor:r,root:n.root,parentNode:n.parentNode,contextStack:n.contextStack,owner:this}),t&&t.appendChild(this.fragment.docFrag)},$.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},teardown:function(e){this.fragment.teardown(e)},toString:function(){return this.fragment.toString()}},Q=function(e,t){this.type=Lt,this.fragments=[],this.length=0,t&&(this.docFrag=n.createDocumentFragment()),this.initialising=!0,ft(this,e),t&&t.appendChild(this.docFrag),this.initialising=!1},Q.prototype={update:lt,resolve:ct,smartUpdate:function(e,t){var n,r;if(e==="push"||e==="unshift"||e==="splice")n={descriptor:this.descriptor.f,root:this.root,parentNode:this.parentNode,owner:this},this.descriptor.i&&(n.indexRef=this.descriptor.i);this[e]&&this[e](n,t)},pop:function(){this.length&&(this.fragments.pop().teardown(!0),this.length-=1)},push:function(e,t){var n,r,i;n=this.length,r=n+t.length;for(i=n;i<r;i+=1)e.contextStack=this.contextStack.concat(this.keypath+"."+i),e.index=i,this.fragments[i]=this.createFragment(e);this.length+=t.length,this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},shift:function(){this.splice(null,[0,1])},unshift:function(e,t){this.splice(e,[0,0].concat(new Array(t.length)))},splice:function(e,t){var n,r,i,s,o,u,a,f,l,c,h;if(!t.length)return;u=+(t[0]<0?this.length+t[0]:t[0]),r=Math.max(0,t.length-2),i=t[1]!==undefined?t[1]:this.length-u,s=r-i;if(!s)return;if(s<0){a=u-s;for(o=u;o<a;o+=1)this.fragments[o].teardown(!0);this.fragments.splice(u,-s)}else{a=u+s,n=this.fragments[u]?this.fragments[u].firstNode():this.parentFragment.findNextNode(this),f=[u,0].concat(new Array(s)),this.fragments.splice.apply(this.fragments,f);for(o=u;o<a;o+=1)e.contextStack=this.contextStack.concat(this.keypath+"."+o),e.index=o,this.fragments[o]=this.createFragment(e);this.parentNode.insertBefore(this.docFrag,n)}this.length+=s,l=u+r,_(this.root,this,l,this.length,s)},teardown:function(e){this.teardownFragments(e),p(this)},firstNode:function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},findNextNode:function(e){return this.fragments[e.index+1]?this.fragments[e.index+1].firstNode():this.parentFragment.findNextNode(this)},teardownFragments:function(e){while(this.fragments.length)this.fragments.shift().teardown(e)},render:function(e){dt(this,e),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},createFragment:function(e){var t=new W(e);return this.docFrag&&this.docFrag.appendChild(t.docFrag),t},toString:function(){var e,t,n;e="",t=0,n=this.length;for(t=0;t<n;t+=1)e+=this.fragments[t].toString();return e}},G=function(e,t){this.type=Nt,this.descriptor=e.descriptor,t&&(this.node=n.createTextNode(e.descriptor),this.parentNode=e.parentFragment.parentNode,t.appendChild(this.node))},G.prototype={teardown:function(e){e&&this.parentNode.removeChild(this.node)},firstNode:function(){return this.node},toString:function(){return(""+this.descriptor).replace("<","&lt;").replace(">","&gt;")}},K=function(e,t){this.type=kt,t&&(this.nodes=[],this.docFrag=n.createDocumentFragment()),this.initialising=!0,ft(this,e),t&&t.appendChild(this.docFrag),this.initialising=!1},K.prototype={update:lt,resolve:ct,teardown:function(e){if(e)while(this.nodes.length)this.parentNode.removeChild(this.nodes.pop());p(this)},firstNode:function(){return this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},render:function(e){while(this.nodes.length)this.parentNode.removeChild(this.nodes.pop());if(e===undefined){this.nodes=[];return}this.nodes=M(e,this.docFrag),this.initialising||this.parentNode.insertBefore(this.docFrag,this.parentFragment.findNextNode(this))},toString:function(){return this.value!==undefined?this.value:""}},Y=function(e){pt(this,e)},Y.prototype={createItem:function(e){if(typeof e.descriptor=="string")return new nt(e.descriptor);switch(e.descriptor.t){case Ct:return new et(e);case kt:return new et(e);case Lt:return new tt(e);default:throw"Something went wrong in a rather interesting way"}},bubble:function(){this.owner.bubble()},teardown:function(){var e,t;e=this.items.length;for(t=0;t<e;t+=1)this.items[t].teardown()},getValue:function(){var e;if(this.items.length===1&&this.items[0].type===Ct){e=this.items[0].value;if(e!==undefined)return e}return this.toString()},toString:function(){return this.items.join("")},toJson:function(){var e,t;e=this.toString();try{t=JSON.parse(e)}catch(n){t=e}return t}},et=function(e){this.type=Ct,ft(this,e)},et.prototype={update:lt,resolve:ct,render:function(e){this.value=e,this.parentFragment.bubble()},teardown:function(){p(this)},toString:function(){return this.value===undefined?"":this.value}},tt=function(e){this.type=Lt,this.fragments=[],this.length=0,ft(this,e)},tt.prototype={update:lt,resolve:ct,teardown:function(){this.teardownFragments(),p(this)},teardownFragments:function(){while(this.fragments.length)this.fragments.shift().teardown();this.length=0},bubble:function(){this.value=this.fragments.join(""),this.parentFragment.bubble()},render:function(e){dt(this,e),this.parentFragment.bubble()},createFragment:function(e){return new Y(e)},toString:function(){return this.fragments.join("")}},nt=function(e){this.type=Nt,this.text=e},nt.prototype={toString:function(){return this.text},teardown:function(){}},O=function(e){var t;if(typeof window=="undefined"||!n||!e)return null;if(e.nodeType)return e;if(typeof e=="string"){t=n.getElementById(e),!t&&n.querySelector&&(t=n.querySelector(e));if(t.nodeType)return t}return e[0]&&e[0].nodeType?e[0]:null},N=Object.prototype.toString,C=function(e){return N.call(e)==="[object Array]"},A=function(e,t){return e===null&&t===null?!0:typeof e=="object"||typeof t=="object"?!1:e===t},L=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},k=function(e){return typeof e=="object"&&N.call(e)==="[object Object]"},H=function(e,t){var n,r,i,s;return r=[],i=function(){var e,t;e=r.length;while(e--)t=r[e],s(t)&&(t.parentNode.removeChild(t),r.splice(e,1))},s=function(e){var t,r;t=n.active.length;while(t--){r=n.active[t];if(e.contains(r))return!1}return!0},n={active:[],info:{i:0},push:function(e){n.active[n.active.length]=e,n.info.i+=1},pop:function(e){n.active.splice(n.active.indexOf(e),1),i(),!n.active.length&&n._ready&&n.complete()},complete:function(){t&&t.call(e)},ready:function(){i(),n._ready=!0,n.active.length||n.complete()},detachWhenReady:function(e){r[r.length]=e}},n},T=function(e){var t,n,r,i,s;if(z[e])return z[e].concat();r=[],i=e,n=0;while(i.length){t=i.indexOf(".",n);if(t===-1)s=i,i="";else{if(i.charAt(t-1)==="\\"&&i.charAt(t-2)!=="\\"){n=t+1;continue}s=i.substr(0,t),n=0}/\[/.test(s)?r=r.concat(s.replace(/\[\s*([0-9]+)\s*\]/g,".$1").split(".")):r[r.length]=s,i=i.substring(t+1)}return z[e]=r,r.concat()},function(){var e,t,n,r,i,s,o,u,a,f,l,c;yt=function(e,t,n){var r,s;return r={pos:0,tokens:e||[],next:function(){return r.tokens[r.pos]},options:t},s=new i(r,n),s},e=function(e,i){return e.next()?t(e,i)||n(e,i)||r(e,i):null},t=function(e,t){var n=e.next();return n.type===Nt?(e.pos+=1,new s(n,t)):null},n=function(e,t){var n=e.next();return n.type===Ht||n.type===kt?n.mustacheType===Lt||n.mustacheType===At?new u(n,e,t):new o(n,e):null},r=function(e,t){var n=e.next(),r;if(n.type===Bt)return r=new a(n,e,t),e.options.sanitize&&e.options.sanitize.elements&&e.options.sanitize.elements.indexOf(r.lcTag)!==-1?null:r;return null},l=function(e){var t="",n,r,i;if(!e)return"";for(r=0,i=e.length;r<i;r+=1){n=e[r].toString();if(n===!1)return!1;t+=n}return t},c=function(e,t){var n,r;if(!t){n=l(e);if(n!==!1)return n}return r=e.map(function(e){return e.toJson(t)}),r},i=function(t,n){var r,i;r=this.items=[],i=e(t,n);while(i!==null)r[r.length]=i,i=e(t,n)},i.prototype={toJson:function(e){var t=c(this.items,e);return t},toString:function(){var e=l(this.items);return e}},function(){var e,t,n;s=function(e,t){this.type=Nt,this.text=t?e.value:e.value.replace(n," ")},s.prototype={toJson:function(){return this.decoded||(this.decoded=t(this.text))},toString:function(){return this.text}},e={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},t=function(t){var n;return n=t.replace(/&([a-zA-Z]+);/,function(t,n){return e[n]?String.fromCharCode(e[n]):t}),n=n.replace(/&#x([0-9]+);/,function(e,t){return String.fromCharCode(parseInt(t,16))}),n=n.replace(/&#([0-9]+);/,function(e,t){return String.fromCharCode(t)}),n},n=/\s+/g}(),function(){o=function(e,t){this.type=e.type===kt?kt:e.mustacheType,e.ref&&(this.ref=e.ref),e.expression&&(this.expr=new f(e.expression)),t.pos+=1},o.prototype={toJson:function(){var e;return this.json?this.json:(e={t:this.type},this.ref&&(e.r=this.ref),this.expr&&(e.x=this.expr.toJson()),this.json=e,e)},toString:function(){return!1}},u=function(t,n,r){var i;this.ref=t.ref,this.indexRef=t.indexRef,this.inverted=t.mustacheType===At,t.expression&&(this.expr=new f(t.expression)),n.pos+=1,this.items=[],i=n.next();while(i){if(i.mustacheType===Ot){if(i.ref.trim()===this.ref||this.expr){n.pos+=1;break}throw new Error("Could not parse template: Illegal closing section")}this.items[this.items.length]=e(n,r),i=n.next()}},u.prototype={toJson:function(e){var t,n,r,i,s;return this.json?this.json:(t={t:Lt},this.ref&&(t.r=this.ref),this.indexRef&&(t.i=this.indexRef),this.inverted&&(t.n=!0),this.expr&&(t.x=this.expr.toJson()),this.items.length&&(t.f=c(this.items,e)),this.json=t,t)},toString:function(){return!1}}}(),function(){var t,n,r,i,s,o,u,f,h,p,d,v,m,g;a=function(n,r,i){var o,a,f,l,c,d,v,g,y,b,w;this.lcTag=n.name.toLowerCase(),this.tag=s[this.lcTag]?s[this.lcTag]:this.lcTag,r.pos+=1,i=i||this.lcTag==="pre",n.attrs&&(d=m(n.attrs),c=d.attrs,v=d.proxies,r.options.sanitize&&r.options.sanitize.eventAttributes&&(c=c.filter(p)),y=function(e){var t=e.name.toLowerCase();return{name:u[t]?u[t]:t,value:yt(e.value)}},b=function(e){var t,n,r,i,s,o,u,a;a=function(){throw new Error("Illegal proxy event")},(!e.name||!e.value)&&a(),t={domEventName:e.name},i=e.value,i[0].type!==Nt&&a(),u=i[0].value.indexOf(":");if(u===-1)i.length>1&&a(),t.name=i[0].value;else{t.name=i[0].value.substr(0,u),i[0].value=i[0].value.substring(u+1),i[0].value||i.shift();if(i.length===1&&i[0].type===Nt)try{t.args=JSON.parse(i[0].value)}catch(f){t.args=i[0].value}t.dynamicArgs=yt(i)}return t},c.length&&(this.attributes=c.map(y)),v.length&&(this.proxies=v.map(b)),d.intro&&(this.intro=b(d.intro)),d.outro&&(this.outro=b(d.outro))),n.selfClosing&&(this.selfClosing=!0),t.indexOf(this.lcTag)!==-1&&(this.isVoid=!0);if(this.selfClosing||this.isVoid)return;this.siblings=h[this.lcTag],this.items=[],a=r.next();while(a){if(a.mustacheType===Ot)break;if(a.type===Bt){if(a.closing){a.name.toLowerCase()===this.lcTag&&(r.pos+=1);break}if(this.siblings&&this.siblings.indexOf(a.name.toLowerCase())!==-1)break}this.items[this.items.length]=e(r),a=r.next()}i||(w=this.items[0],w&&w.type===Nt&&(w.text=w.text.replace(ot,""),w.text||this.items.shift()),w=this.items[this.items.length-1],w&&w.type===Nt&&(w.text=w.text.replace(ut,""),w.text||this.items.pop()))},a.prototype={toJson:function(e){var t,n,r,i,s,o,u,a,f;t={t:Mt,e:this.tag};if(this.attributes&&this.attributes.length){t.a={},f=this.attributes.length;for(a=0;a<f;a+=1){n=this.attributes[a].name;if(t.a[n])throw new Error("You cannot have multiple elements with the same name");this.attributes[a].value===undefined&&(r=null),r=c(this.attributes[a].value.items,e),t.a[n]=r}}this.items&&this.items.length&&(t.f=c(this.items,e));if(this.proxies&&this.proxies.length){t.v={},f=this.proxies.length;for(a=0;a<f;a+=1)o=this.proxies[a],o.args?t.v[o.domEventName]={n:o.name,a:o.args}:o.dynamicArgs?t.v[o.domEventName]={n:o.name,d:c(o.dynamicArgs.items,e)}:t.v[o.domEventName]=o.name}return this.intro&&(this.intro.args?t.t1={n:this.intro.name,a:this.intro.args}:this.intro.dynamicArgs?t.t1={n:this.intro.name,d:c(this.intro.dynamicArgs.items,e)}:t.t1=this.intro.name),this.outro&&(this.outro.args?t.t2={n:this.outro.name,a:this.outro.args}:this.outro.dynamicArgs?t.t2={n:this.outro.name,d:c(this.outro.dynamicArgs.items,e)}:t.t2=this.outro.name),this.json=t,t},toString:function(){var e,r,i,s,o,u,a,f;if(this.str!==undefined)return this.str;if(n.indexOf(this.tag.toLowerCase())===-1)return this.str=!1;if(this.proxies||this.intro||this.outro)return this.str=!1;a=l(this.items);if(a===!1)return this.str=!1;f=t.indexOf(this.tag.toLowerCase())!==-1,e="<"+this.tag;if(this.attributes)for(r=0,i=this.attributes.length;r<i;r+=1){o=this.attributes[r].name.toLowerCase();if(o.indexOf(":")!==-1)return this.str=!1;if(o==="id"||o==="intro"||o==="outro")return this.str=!1;s=" "+this.attributes[r].name;if(this.attributes[r].value!==undefined){u=this.attributes[r].value.toString();if(u===!1)return this.str=!1;u!==""&&(s+="=",/[\s"'=<>`]/.test(u)?s+='"'+u.replace(/"/g,"&quot;")+'"':s+=u)}e+=s}return this.selfClosing&&!f?(e+="/>",this.str=e):(e+=">",f?this.str=e:(e+=a,e+="</"+this.tag+">",this.str=e))}},t="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),n="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol p param pre q s samp script select small span strike strong style sub sup textarea title tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),f="li dd rt rp optgroup option tbody tfoot tr td th".split(" "),i="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),o="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef glyphRef gradientTransform gradientTransform gradientUnits gradientUnits kernelMatrix kernelUnitLength kernelUnitLength kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent specularExponent spreadMethod spreadMethod startOffset stdDeviation stitchTiles surfaceScale surfaceScale systemLanguage tableValues targetX targetY textLength textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),r=function(e){var t={},n=e.length;while(n--)t[e[n].toLowerCase()]=e[n];return t},s=r(i),u=r(o),h={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote dir div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rp","rt"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tr:["tr"],td:["td","th"],th:["td","th"]},p=function(e){return e.name.substr(0,2)!=="on"},d=function(e){return e.name.substr(0,6)!=="proxy-"},v=function(e){return e.name.substr(0,6)==="proxy-"?(e.name=e.name.substring(6),!0):!1},m=function(e){var t,n,r,i,s,o;r={},t=[],n=[],s=e.length;for(i=0;i<s;i+=1){o=e[i];if(o.name==="intro"){if(r.intro)throw new Error("An element can only have one intro transition");r.intro=o}else if(o.name==="outro"){if(r.outro)throw new Error("An element can only have one outro transition");r.outro=o}else o.name.substr(0,6)==="proxy-"?(o.name=o.name.substring(6),n[n.length]=o):t[t.length]=o}return r.attrs=t,r.proxies=n,r},g=/^([a-zA-Z_$][a-zA-Z_$0-9]*)(?::(.+))?$/}(),function(){var e,t,n,r;f=function(n){this.refs=[],e(n,this.refs),this.str=t(n,this.refs)},f.prototype={toJson:function(){return{r:this.refs,s:this.str}}},e=function(t,n){var r,i;t.t===$t&&n.indexOf(t.n)===-1&&n.unshift(t.n),i=t.o||t.m;if(i)if(k(i))e(i,n);else{r=i.length;while(r--)e(i[r],n)}t.x&&e(t.x,n),t.r&&e(t.r,n),t.v&&e(t.v,n)},t=function(e,r){var i=function(e){return t(e,r)};switch(e.t){case zt:case Xt:case It:return e.v;case qt:return"'"+e.v.replace(/'/g,"\\'")+"'";case Rt:return"["+(e.m?e.m.map(i).join(","):"")+"]";case Ut:return"{"+(e.m?e.m.map(i).join(","):"")+"}";case Vt:return n(e.k)+":"+t(e.v,r);case Qt:return(e.s==="typeof"?"typeof ":e.s)+t(e.o,r);case Zt:return t(e.o[0],r)+e.s+t(e.o[1],r);case en:return t(e.x,r)+"("+(e.o?e.o.map(i).join(","):"")+")";case Gt:return"("+t(e.x,r)+")";case Kt:return t(e.x,r)+t(e.r,r);case Jt:return e.n?"."+e.n:"["+t(e.x,r)+"]";case Yt:return t(e.o[0],r)+"?"+t(e.o[1],r)+":"+t(e.o[2],r);case $t:return"${"+r.indexOf(e.n)+"}";default:throw console.log(e),new Error("Could not stringify expression token. This error is unexpected")}},n=function(e){return e.t===qt?r.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':e.t===It?e.v:e},r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/}()}(),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;bt=function(e){var t=r(e)||i(e)||s(e);return t},E=function(e,t){var n=e.remaining().substr(0,40);throw n.length===40&&(n+="..."),new Error('Tokenizer failed: unexpected string "'+n+'" (expected '+t+")")},e=function(e,t){var n;return n=e.str.substr(e.pos,t.length),n===t?(e.pos+=t.length,t):null},t=function(e){return function(t){var n=e.exec(t.str.substring(t.pos));return n?(t.pos+=n[0].length,n[1]||n[0]):null}},n=function(e){var t=ot.exec(e.str.substring(e.pos));return t?(e.pos+=t[0].length,t[0]):null},u=t(/^[^\s=]+/),a=function(t){var r,i,s;return e(t,"=")?(r=t.pos,n(t),i=u(t),i?(n(t),s=u(t),s?(n(t),e(t,"=")?[i,s]:(t.pos=r,null)):(t.pos=r,null)):(t.pos=r,null)):null},f=t(/^[a-zA-Z_$][a-zA-Z_$0-9]*/),l=function(t){var n,r,i,s,o;n=t.pos,s=e(t,".")||"",o=f(t)||"";if(s&&!o)return s;r=s+o;if(!r)return null;i=c(t);while(i!==null)r+=i,i=c(t);return r},c=function(e){return h(e)||p(e)},h=t(/^\.[a-zA-Z_$0-9]+/),p=function(e){var t=d(e);return t?"."+t:null},d=t(/^\[(0|[1-9][0-9]*)\]/),v=function(e){var t,n,r,i,s;t=e.pos,n="",r=b(e),r&&(n+=r),i=m(e),i&&(n+=i);if(n){s=v(e);while(s)n+=s,s=v(e)}return n},m=t(/^[^\\']+/),g=function(e){var t,n,r,i,s;t=e.pos,n="",r=b(e),r&&(n+=r),i=y(e),i&&(n+=i);if(!n)return"";s=g(e);while(s!=="")n+=s;return n},y=t(/^[^\\"]+/),b=function(e){var t="",n;n=w(e);while(n)t+=n,n=w(e);return t||null},w=function(t){var n;return e(t,"\\")?(n=t.str.charAt(t.pos),t.pos+=1,n):null},function(){var i,s,u,f,l,c;r=function(e){return e.tripleDelimiters[0].length>e.delimiters[0].length?s(e)||i(e):i(e)||s(e)},i=function(t){var r=t.pos,i;return e(t,t.delimiters[0])?(i=a(t),i?e(t,t.delimiters[1])?(t.delimiters=i,{type:Ht,mustacheType:Pt}):(t.pos=r,null):(i=u(t),i===null?(t.pos=r,null):(n(t),e(t,t.delimiters[1])||E(t,'"'+t.delimiters[1]+'"'),i))):null},s=function(t){var r=t.pos,i;return e(t,t.tripleDelimiters[0])?(i=a(t),i?e(t,t.delimiters[1])?(t.tripleDelimiters=i,{type:Pt}):(t.pos=r,null):(n(t),i=u(t,!0),i===null?(t.pos=r,null):(n(t),e(t,t.tripleDelimiters[1])?i:(t.pos=r,null)))):null},u=function(e,t){var r,i,s,u,a,c,h;r=e.pos,i={type:t?kt:Ht};if(!t){s=f(e),i.mustacheType=s||Ct;if(s===Dt||s===Ot){c=e.remaining(),h=c.indexOf(e.delimiters[1]);if(h!==-1)return i.ref=c.substr(0,h),e.pos+=h,i}}n(e),u=o(e);while(u.t===Gt&&u.x)console.log(u," -> ",u.x),u=u.x;return u.t===$t?i.ref=u.n:i.expression=u,a=l(e),a!==null&&(i.indexRef=a),i},c={"#":Lt,"^":At,"/":Ot,">":_t,"!":Dt,"&":Ct},f=function(e){var t=c[e.str.charAt(e.pos)];return t?(e.pos+=1,t):null},l=t(/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/)}(),function(){var s,o,u,a,f,l,c,h,p,d,m,y,b,w;i=function(e){return s(e)||o(e)},s=function(t){var r,i,s;return r=t.pos,e(t,"<")?(i={type:Bt},i.name=u(t),i.name?(s=a(t),s&&(i.attrs=s),n(t),e(t,"/")&&(i.selfClosing=!0),e(t,">")?i:(t.pos=r,null)):(t.pos=r,null)):null},o=function(t){var n,r;n=t.pos;if(!e(t,"<"))return null;r={type:Bt,closing:!0};if(!e(t,"/"))throw new Error("Unexpected character "+t.remaining().charAt(0)+' (expected "/")');r.name=u(t);if(!r.name)throw new Error("Unexpected character "+t.remaining().charAt(0)+" (expected tag name)");if(!e(t,">"))throw new Error("Unexpected character "+t.remaining().charAt(0)+' (expected ">")');return r},u=t(/^[a-zA-Z][a-zA-Z0-9]*/),a=function(e){var t,r,i;t=e.pos,n(e),i=f(e);if(!i)return e.pos=t,null;r=[];while(i!==null)r[r.length]=i,n(e),i=f(e);return r},f=function(e){var t,n,r;return n=l(e),n?(t={name:n},r=c(e),r&&(t.value=r),t):null},l=t(/^[^\s"'>\/=]+/),c=function(t){var r,i;return r=t.pos,n(t),e(t,"=")?(i=m(t)||b(t)||h(t),i===null?(t.pos=r,null):i):(t.pos=r,null)},d=t(/^[^\s"'=<>`]+/),p=function(e){var t,n,r;return t=e.pos,n=d(e),n?((r=n.indexOf(e.delimiters[0]))!==-1&&(n=n.substr(0,r),e.pos=t+n.length),{type:Nt,value:n}):null},h=function(e){var t,n;t=[],n=r(e)||p(e);while(n!==null)t[t.length]=n,n=r(e)||p(e);return t.length?t:null},y=function(e){var t,n,r;return t=e.pos,n=v(e),n?((r=n.indexOf(e.delimiters[0]))!==-1&&(n=n.substr(0,r),e.pos=t+n.length),{type:Nt,value:n}):null},m=function(t){var n,i,s;n=t.pos;if(!e(t,"'"))return null;i=[],s=r(t)||y(t);while(s!==null)i[i.length]=s,s=r(t)||y(t);return e(t,"'")?i:(t.pos=n,null)},w=function(e){var t,n,r;return t=e.pos,n=g(e),n?((r=n.indexOf(e.delimiters[0]))!==-1&&(n=n.substr(0,r),e.pos=t+n.length),{type:Nt,value:n}):null},b=function(t){var n,i,s;n=t.pos;if(!e(t,'"'))return null;i=[],s=r(t)||w(t);while(s!==null)i[i.length]=s,s=r(t)||w(t);return e(t,'"')?i:(t.pos=n,null)}}(),function(){s=function(e){var t,n;return t=e.str.length,[e.delimiters[0],e.tripleDelimiters[0],"<"].forEach(function(n){var r=e.str.indexOf(n,e.pos);r!==-1&&(t=Math.min(r,t))}),t===e.pos?null:(n=e.str.substring(e.pos,t),e.pos=t,{type:Nt,value:n})}}(),function(){var r,i,s,u,a,l,c,d,m,y,b,w,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j;o=function(e){var t,n,r,i,s,o;return t=e.pos,n=b(e),n},r=function(t){var i,s,u,a;i=t.pos,n(t),u=o(t);if(u===null)return null;s=[u],n(t);if(e(t,",")){a=r(t);if(a===null)return t.pos=i,null;s=s.concat(a)}return s},a=function(t){var r,i;return r=t.pos,e(t,"(")?(n(t),i=o(t),i?(n(t),e(t,")")?{t:Gt,x:i}:(t.pos=r,null)):(t.pos=r,null)):null},l=function(e){return k(e)||N(e)||a(e)},c=function(e){var t,n,r,i,s;n=l(e);if(!n)return null;i=C(e);if(!i)return n;while(i!==null)s={t:Kt,x:n,r:i},n=s,i=C(e);return s},d=function(t){var i,s,o,u;return s=c(t),s?(i=t.pos,e(t,"(")?(n(t),o=r(t),n(t),e(t,")")?(u={t:en,x:s},o&&(u.o=o),u):(t.pos=i,s)):s):null},i=function(t,r){return function(i){var s,u;return e(i,t)?(s=i.pos,n(i),u=o(i),u||E(i,"an expression"),{s:t,o:u,t:Qt}):r(i)}},function(){var e,t,n,r,s;r="! ~ + - typeof".split(" "),s=d;for(e=0,t=r.length;e<t;e+=1)n=i(r[e],s),s=n;m=s}(),s=function(t,r){return function(i){var s,u,a;return u=r(i),u?(s=i.pos,n(i),e(i,t)?(n(i),a=o(i),a?{t:Zt,s:t,o:[u,a]}:(i.pos=s,u)):(i.pos=s,u)):null}},function(){var e,t,n,r,i;r="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),i=m;for(e=0,t=r.length;e<t;e+=1)n=s(r[e],i),i=n;y=i}(),b=function(t){var r,i,s,u;return i=y(t),i?(r=t.pos,n(t),e(t,"?")?(n(t),s=o(t),s?(n(t),e(t,":")?(n(t),u=o(t),u?{t:Yt,o:[i,s,u]}:(t.pos=r,i)):(t.pos=r,i)):(t.pos=r,i)):(t.pos=r,i)):null},w=t(/^[0-9]+/),S=t(/^[eE][\-+]?[0-9]+/),x=t(/^\.[0-9]+/),T=t(/^(0|[1-9][0-9]*)/),N=function(t){var n,r,i,s,o,u;n=t.pos,i=e(t,".")||"",r=f(t)||"",s=i+r;if(!s)return null;while(o=h(t)||p(t))s+=o;return e(t,"(")&&(u=s.lastIndexOf("."),u!==-1?(s=s.substr(0,u),t.pos=n+s.length):t.pos-=1),{t:$t,n:s}},C=function(t){var r,i,s,u;r=t.pos,n(t);if(e(t,".")){n(t);if(s=f(t))return{t:Jt,n:s};E(t,"a property name")}return e(t,"[")?(n(t),u=o(t),u||E(t,"an expression"),n(t),e(t,"]")||E(t,'"]"'),{t:Jt,x:u}):null},k=function(e){var t=O(e)||A(e)||D(e)||M(e)||_(e)||L(e);return t},L=function(t){var i,s,o;return i=t.pos,n(t),e(t,"[")?(o=r(t),e(t,"]")?{t:Rt,m:o}:(t.pos=i,null)):(t.pos=i,null)},A=function(e){var t=e.remaining();return t.substr(0,4)==="true"?(e.pos+=4,{t:zt,v:"true"}):t.substr(0,5)==="false"?(e.pos+=5,{t:zt,v:"false"}):null},j=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)/,D=function(e){var t,n,r,i;return t=e.pos,n=f(e),n?(r=j.exec(n),r?(e.pos=t+r[0].length,{t:Xt,v:r[0]}):(e.pos=t,null)):null},O=function(e){var t,n;return t=e.pos,(n=x(e))?{t:It,v:n}:(n=T(e),n===null?null:(n+=x(e)||"",n+=S(e)||"",{t:It,v:n}))},_=function(t){var r,i,s,o,u;return r=t.pos,n(t),e(t,"{")?(s=P(t),n(t),e(t,"}")?{t:Ut,m:s}:(t.pos=r,null)):(t.pos=r,null)},P=function(t){var n,r,i,s;return n=t.pos,i=H(t),i===null?null:(r=[i],e(t,",")?(s=P(t),s?r.concat(s):(t.pos=n,null)):r)},H=function(t){var r,i,s,u;return r=t.pos,n(t),s=B(t),s===null?(t.pos=r,null):(n(t),e(t,":")?(n(t),u=o(t),u===null?(t.pos=r,null):{t:Vt,k:s,v:u}):(t.pos=r,null))},B=function(e){return f(e)||M(e)||O(e)},M=function(t){var n,r;return n=t.pos,e(t,'"')?(r=g(t),e(t,'"')?{t:qt,v:r}:(t.pos=n,null)):e(t,"'")?(r=v(t),e(t,"'")?{t:qt,v:r}:(t.pos=n,null)):null}}()}(),function(){var e,t,n,r;e=/^\s*$/,t=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,n=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,f=function(n,i){var s,o,u,a;return i=i||{},t.test(n)?r(n,i):(i.sanitize===!0&&(i.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),s=wt(n,i),i.preserveWhitespace||(a=s[0],a&&a.type===Nt&&e.test(a.value)&&s.shift(),a=s[s.length-1],a&&a.type===Nt&&e.test(a.value)&&s.pop()),o=yt(s,i,i.preserveWhitespace),u=o.toJson(),typeof u=="string"?[u]:u)},r=function(e,r){var i,s,o,u,a,l;o={},i="",s=e;while(a=t.exec(s)){u=a[1],i+=s.substr(0,a.index),s=s.substring(a.index+a[0].length),l=n.exec(s);if(!l||l[1]!==u)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");o[u]=f(s.substr(0,l.index),r),s=s.substring(l.index+l[0].length)}return{template:f(i,r),partials:o}}}(),wt=function(e,t){var n,r,i,s,o;t=t||{},n={str:St(e),pos:0,delimiters:t.delimiters||["{{","}}"],tripleDelimiters:t.tripleDelimiters||["{{{","}}}"],remaining:function(){return n.str.substring(n.pos)}},r=[];while(n.pos<n.str.length){i=bt(n);if(i===null&&n.remaining())throw s=n.str.substr(0,n.pos).substr(-20),s.length===20&&(s="..."+s),o=n.remaining().substr(0,20),o.length===20&&(o+="..."),new Error("Could not parse template: "+(s?s+"<- ":"")+"failed at character "+n.pos+" ->"+o);r[r.length]=i}return xt(r),Et(r),r},t.prototype=r,t.adaptors=s,t.eventDefinitions=o,t.partials={},t.easing=u,t.extend=a,t.interpolate=l,t.interpolators=c,t.parse=f,t.transitions=h,t.VERSION=sn,typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define("Ractive",[],function(){return t}):e.Ractive=t}(this),function(e){var t;(function(){var e,n,r="ontouchstart"in document,i,s,o,u,a,f,l,c,h,p="row",d="column",v="left",m="top",g="width",y="height",b="vertical",w="horizontal",E="clientX",S="clientY";t=function(t){var n=this,r,i,o,u,a;this.el=t.el,r=document.createDocumentFragment();if(t.columns&&t.rows)throw new Error("You can't have top level rows and top level columns - one or the other");t.columns?(this.type=p,o=t.columns):t.rows&&(this.type=d,o=t.rows),this.blocks={},this.subs={},this.min=t.min||10,this.root=new e(this,this,r,"divvy-0",{children:o},0,100,this.type,{top:!0,right:!0,bottom:!0,left:!0}),s(this.root.node,"divvy-root"),this.el.appendChild(r),t.shakeOnResize!==!1&&(a=function(){n._changedSinceLastResize={},n.shake(),c(n,"resize",n._changedSinceLastResize)},window.addEventListener?window.addEventListener("resize",a):window.attachEvent&&window.attachEvent("onresize",a)),this._changed={},this._changedSinceLastResize={},this.shake()},t.prototype={shake:function(){var e=this.el.getBoundingClientRect();this.bcr={left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top};if(this.bcr.width===this.width&&this.bcr.height===this.height)return;return this.width=this.bcr.width,this.height=this.bcr.height,this.pixelSize=this[this.type===d?y:g],this.root.shake(),this},changed:function(){var e=this._changed;return this._changed={},e},getState:function(){var e={};return a(this.root,e),e},setState:function(e){var t={},n;f(this,this.root,e,t);for(n in t)if(t.hasOwnProperty(n)){c(this,"resize",t);break}return this},save:function(e){var t,n;if(!localStorage)return;return t=e?"divvy_"+e:"divvy",n=JSON.stringify(this.getState()),localStorage.setItem(t,n),this},restore:function(e){var t,n;if(!localStorage)return;return t=e?"divvy_"+e:"divvy",n=JSON.parse(localStorage.getItem(t)),n&&this.setState(n),this},on:function(e,t){var n=this,r;return(r=this.subs[e])?r[r.length]=t:this.subs[e]=[t],{cancel:function(){n.off(e,t)}}},off:function(e,t){var n,r;return e?t?(r=this.subs[e])?(n=r.indexOf(t),n!==-1&&(r.splice(n,1),r.length||delete this.subs[e]),this):this:(delete this.subs[e],this):(this.subs={},this)}},c=function(e,t){var n,r,i,s;r=e.subs[t];if(!r)return;n=Array.prototype.slice.call(arguments,2);if(!n.length){for(i=0,s=r.length;i<s;i+=1)r[i].call(e);return}for(i=0,s=r.length;i<s;i+=1)r[i].apply(e,n);return e},a=function(e,t){var n;t[e.id]=[e.start,e.size];if(!e.children)return;n=e.children.length;while(n--)a(e.children[n],t)},f=function(e,t,n,r,i){var s,o,u,a,l;l=n[t.id];if(!l)return;if(t.start!==l[0]||t.size!==l[1])e._changed[t.id]=r[t.id]=!0;t.start=l[0],t.size=l[1],t.end=t.start+t.size,t.node.style[t.type===d?v:m]=t.start+"%",t.node.style[t.type===d?g:y]=t.size+"%";if(t.children){a=0,o=t.children.length;for(s=0;s<o;s+=1)u=t.children[s],f(e,u,n,r,!0),a+=u.size,t.controls[s]&&t.controls[s].setPosition(a);s=t.children.length;while(s--)f(e,t.children[s],n,r,!0)}t.shake()},l=function(e,t){if(!t){e.el.style.cursor=e._cursor;return}e._cursor=e.el.style.cursor,e.el.style.cursor=t+"-resize"},e=function(t,r,i,o,u,a,f,l,c){var h,E,S,x,T,N,C,k,L;this.start=a,this.size=f,this.end=this.start+this.size,this.type=l,this.divvy=t,this.parent=r,this.edges=c,this.min=u.min||t.min,this.max=u.max,u.nodeType===1&&(u={node:u}),typeof u=="string"&&(u={id:u}),Object.prototype.toString.call(u)==="[object Array]"&&(u={children:u}),this.id=u.id||o,u.children&&u.children.length?(this.node=document.createElement("div"),s(this.node,"divvy-block"),s(this.node,"divvy-branch"),this.node.id=this.id):(this.node=document.createElement("div"),s(this.node,"divvy-block"),s(this.node,"divvy-leaf"),!u.node&&u.id&&(N=document.getElementById(u.id))&&(u.node=N),u.node?this.inner=u.node:this.inner=document.createElement("div"),s(this.inner,"divvy-inner"),this.node.appendChild(this.inner),t.blocks[this.id]=this.inner,this.inner.id=this.id),c.top&&s(this.node,"divvy-top"),c.right&&s(this.node,"divvy-right"),c.bottom&&s(this.node,"divvy-bottom"),c.left&&s(this.node,"divvy-left"),this.node.style[l===d?v:m]=a+"%",this.node.style[l===d?g:y]=f+"%";if(u.children){h=0,E=u.children.length;while(E--)h+=u.children[E].size||1;this.children=[],this.controls=[],S=0;for(E=0;E<u.children.length;E+=1)x=u.children[E],T=100*((x.size||1)/h),L={},l===d?(L.top=c.top&&E===0,L.bottom=c.bottom&&E===u.children.length-1,L.left=c.left,L.right=c.right):(L.left=c.left&&E===0,L.right=c.right&&E===u.children.length-1,L.top=c.top,L.bottom=c.bottom),this.children[E]=new e(t,this,this.node,o+E,x,S,T,l===d?p:d,L),S+=T;for(E=0;E<u.children.length-1;E+=1)C=this.children[E],k=this.children[E+1],this.controls[E]=new n(t,this,this.node,C,k,l===p?b:w)}i.appendChild(this.node)},e.prototype={setStart:function(e){var t,n,r,i;t=this.start,n=this.size,r=e-t,i=n-r,this.node.style[this.type===d?v:m]=e+"%",this.node.style[this.type===d?g:y]=i+"%",this.start=e,this.size=i,this.shake()},setEnd:function(e){var t,n,r,i;t=this.end,n=this.size,r=e-t,i=n+r,this.node.style[this.type===d?g:y]=i+"%",this.end=e,this.size=i,this.shake()},shake:function(){var e,t,n,r,i,s,o;o=this.node.getBoundingClientRect(),this.bcr={left:o.left,right:o.right,top:o.top,bottom:o.bottom,width:o.right-o.left,height:o.bottom-o.top};if(this.bcr.width===this.width&&this.bcr.height===this.height)return;this.width=this.bcr.width,this.height=this.bcr.height,this.divvy._changed[this.id]=this.divvy._changedSinceLastResize[this.id]=!0;if(!this.children)return;this.pixelSize=this.bcr[this.type===d?y:g],t=this.children.length;for(e=0;e<t-1;e+=1)n=this.children[e],r=this.children[e+1],i=this.controls[e],s=n.minPc(),n.size<s&&(n.setEnd(n.start+s),r.setStart(n.start+s),i.setPosition(n.start+s)),s=n.maxPc(),n.size>s&&(n.setEnd(n.start+s),r.setStart(n.start+s),i.setPosition(n.start+s));for(e=t-1;e>0;e-=1)n=this.children[e-1],r=this.children[e],i=this.controls[e-1],s=r.minPc(),r.size<s&&(n.setEnd(r.end-s),r.setStart(r.end-s),i.setPosition(r.end-s)),s=r.maxPc(),r.size>s&&(n.setEnd(r.end-s),r.setStart(r.end-s),i.setPosition(r.end-s));e=this.children.length;while(e--)this.children[e].shake()},minPc:function(){var e;return e=this.parent.pixelSize,this.min/e*100},maxPc:function(){var e;return this.max?(e=this.parent.pixelSize,this.max/e*100):100}},n=function(e,t,n,i,o,u){var a=this,f;this.divvy=e,this.parent=t,this.before=i,this.after=o,this.type=u,this.parentNode=n,this.node=document.createElement("div"),s(this.node,"divvy-"+u+"-control"),r&&s(this.node,"divvy-touch-control"),this.setPosition(o.start),f=function(e){var t,n,r,s,f,l,p;e.preventDefault&&e.preventDefault(),n=Math.max(i.start+i.minPc(),o.end-o.maxPc()),r=Math.min(i.start+i.maxPc(),o.end-o.minPc()),f=function(e){var t;t=a.getPosition(e[u===b?E:S]),t=Math.max(n,Math.min(r,t)),i.setEnd(t),o.setStart(t),a.setPosition(t),c(a.divvy,"resize",a.divvy._changedSinceLastResize),a.divvy._changedSinceLastResize={}},l=function(e){a.setInactive(),p()},p=function(){document.removeEventListener?(document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",l)):document.detachEvent&&(document.detachEvent("onmousemove",f),document.detachEvent("onmouseup",l))},document.addEventListener?(document.addEventListener("mousemove",f),document.addEventListener("mouseup",l)):document.attachEvent&&(document.attachEvent("onmousemove",f=h(f)),document.attachEvent("onmouseup",l))},this.node.addEventListener?this.node.addEventListener("mousedown",f):this.node.attachEvent&&this.node.attachEvent("onmousedown",f),r&&this.node.addEventListener("touchstart",function(e){var t,n,r,s,f,l,h,p,d,v;if(e.touches.length!==1)return;e.preventDefault(),t=e.touches[0],r=t.identifier,a.setActive(),f=Math.max(i.start+i.minPc(),o.end-o.maxPc()),l=Math.min(i.start+i.maxPc(),o.end-o.minPc()),p=function(e){var t,n;(e.touches.length!==1||e.touches[0].identifier!==r)&&v(),n=e.touches[0],t=a.getPosition(n[u===b?E:S]),t=Math.max(f,Math.min(l,t)),i.setEnd(t),o.setStart(t),a.setPosition(t),c(a.divvy,"resize",a.divvy._changedSinceLastResize),a.divvy._changedSinceLastResize={}},d=function(e){a.setInactive(),v()},v=function(){window.removeEventListener("touchmove",p),window.removeEventListener("touchend",d),window.removeEventListener("touchcancel",d)},window.addEventListener("touchmove",p),window.addEventListener("touchend",d),window.addEventListener("touchcancel",d)}),n.appendChild(this.node)},n.prototype={setActive:function(e){s(this.node,"divvy-active"),l(this.divvy,this.type===b?"ew":"ns")},setInactive:function(e){o(this.node,"divvy-active"),l(this.divvy,!1)},getPosition:function(e){var t,n,r,i;return t=this.parent.bcr,n=t[this.type===b?v:m],r=t[this.type===b?g:y],i=100*(e-n)/r,i},setPosition:function(e){this.node.style[this.type===b?v:m]=e+"%",this.pos=e}},i=function(e,t){var n,r;for(n=0,r=t.length;n<r;n+=1)if(t[n]===e)return e;return-1},u=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},s=function(e,t){e.classList&&e.classList.add?s=function(e,t){e.classList.add(t)}:s=function(e,t){var n,r,s;n=(e.getAttribute("class")||"").split(" "),s=n.length;while(s--)n[s]=u(n[s]);n.indexOf?r=n.indexOf(t):r=i(t,n),r===-1&&e.setAttribute("class",n.concat(t).join(" "))},s(e,t)},o=function(e,t){e.classList&&e.classList.remove?o=function(e,t){e.classList.remove(t)}:o=function(e,t){var n,r,s;n=(e.getAttribute("class")||"").split(" "),s=n.length;while(s--)n[s]=u(n[s]);n.indexOf?r=n.indexOf(t):r=i(t,n),r!==-1&&(n.splice(r,1),e.setAttribute("class",n.join(" ")))},o(e,t)},h=function(e,t){var n,r;return t=t||500,n=function(){var n;n=new Date;if(!r||n-r>t)return e.apply(this,arguments)},n}})(),typeof module!="undefined"&&module.exports?module.exports=t:typeof define!="undefined"&&define.amd?define("Divvy",[],function(){return t}):e.Divvy=t}(this),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h=[],p=e.config&&e.config()||{};t={version:"2.0.5+",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("rv",["text","Ractive"],function(e,t){var n={};return{load:function(r,i,s,o){var u;u=r+(r.substr(-5)!==".html"?".html":""),e.get(i.toUrl(u),function(e){var i=t.parse(e);o.isBuild&&(n[r]=i),s(i)},s.error)},write:function(e,t,r){if(n[t]===undefined)throw"Could not parse template "+t;r('define("'+e+"!"+t+'",function(){return '+JSON.stringify(n[t])+";})")}}}),define("rv!templates/main",function(){return[{t:7,e:"div",a:{id:"header"},f:[{t:7,e:"h1",f:"Learn Ractive.js"}," ",{t:7,e:"div",a:{"class":"tutorial-buttons"},f:[{t:7,e:"a",a:{"class":["button ",{t:2,r:"prevTutorialDisabled"}]},f:"&laquo;",v:{tap:"prevTutorial"}}," ",{t:7,e:"strong",f:[{t:2,r:"tutorialNum"},"/",{t:2,r:"numTutorials"}]}," ",{t:7,e:"a",a:{"class":["button ",{t:2,r:"nextTutorialDisabled"}]},f:"&raquo;",v:{tap:"nextTutorial"}}]}," ",{t:7,e:"h2",f:[{t:2,r:"title"}]}]}," ",{t:7,e:"div",a:{id:"content"},f:[{t:7,e:"div",a:{id:"copy-block","class":"block copy-block"},f:[{t:7,e:"div",a:{"class":"info"},f:[{t:7,e:"div",a:{"class":"buttons"},f:[{t:7,e:"a",a:{"class":"button"},f:"reset",v:{tap:"reset"}}]}," ",{t:7,e:"div",a:{"class":"buttons-left"},f:[{t:7,e:"a",a:{"class":["button ",{t:2,r:"prevDisabled"}]},f:"&laquo;",v:{tap:"prev"}}," ",{t:7,e:"strong",f:[{t:2,r:"stepNum"},"/",{t:2,r:"numSteps"}]}," ",{t:7,e:"a",a:{"class":["button ",{t:2,r:"nextDisabled"}]},f:"&raquo;",v:{tap:"next"}}]}]}," ",{t:7,e:"div",a:{id:"copy","class":"content"},f:[{t:3,r:"copy"}," ",{t:7,e:"div",a:{"class":"button-container-left"},f:[{t:7,e:"a",a:{"class":["button block-button ",{t:2,r:"fixDisabled"}]},f:"fix code",v:{tap:"fix"}}]}," ",{t:7,e:"div",a:{"class":"button-container-right"},f:[{t:7,e:"a",a:{"class":"button block-button"},f:["next ",{t:2,r:"stepOrTutorial"}," »"],v:{tap:"next"}}]}]}]}," ",{t:7,e:"div",a:{id:"output-block","class":"block output-block"},f:[{t:7,e:"div",a:{"class":"info"},f:"<strong>#output</strong>"}," ",{t:7,e:"div",a:{id:"output","class":"content"}}]}," ",{t:7,e:"div",a:{id:"template","class":"block code-block"},f:[{t:7,e:"div",a:{"class":"info"},f:"<strong>#template</strong>"}," ",{t:7,e:"div",a:{"class":"content",id:"template-editor"}}]}," ",{t:7,e:"div",a:{id:"javascript","class":"block code-block"},f:[{t:7,e:"div",a:{"class":"info"},f:[{t:7,e:"div",a:{"class":"buttons"},f:[{t:7,e:"a",a:{"class":"button"},f:"execute (Shift-Enter)",v:{tap:"execute-js"}}]}," ",{t:7,e:"strong",f:"#javascript"}]}," ",{t:7,e:"div",a:{"class":"content",id:"javascript-editor"}}]}," ",{t:7,e:"div",a:{id:"console","class":"block code-block"},f:[{t:7,e:"div",a:{"class":"info"},f:[{t:7,e:"div",a:{"class":"buttons"},f:[{t:7,e:"a",a:{"class":"button"},f:"execute (Shift-Enter)",v:{tap:"execute-console"}}]}," ",{t:7,e:"strong",f:"#console"}]}," ",{t:7,e:"div",a:{"class":"content",id:"console-editor"}}]}]}," ",{t:7,e:"style",a:{type:"text/css"},f:[{t:2,r:"css"}]}]}),define("views/Main",["Ractive","Divvy","rv!templates/main"],function(e,t,n){return e.extend({template:n,init:function(e){this.divvy=new t({el:document.getElementById("content"),columns:[{size:45,children:[{id:"copy-block",size:3},{id:"output-block",size:2}]},{size:55,children:[{id:"template",size:3},{id:"javascript",size:5},{id:"console",size:2}]}]})}})}),define("controllers/main",["Ractive","views/Main"],function(RealRactive,Main){var eval2,teardown,teardownQueue,onResizeHandlers,prop,timeouts,_setTimeout,_clearTimeout,report,reportQueue,Ractive;eval2=eval,teardownQueue=[],timeouts=[],_setTimeout=window.setTimeout,_clearTimeout=window.clearTimeout,window.setTimeout=function(e,t){var n=_setTimeout.apply(window,arguments);timeouts[timeouts.length]=n},window.clearTimeout=function(e){var t=timeouts.indexOf(e);t!==-1&&timeouts.splice(t,1),_clearTimeout(e)},teardown=function(){while(teardownQueue.length)teardownQueue.pop().teardown();onResizeHandlers=[];while(timeouts[0])window.clearTimeout(timeouts[0])},window.Ractive=Ractive=function(){RealRactive.apply(this,arguments),teardownQueue[teardownQueue.length]=this},window.Ractive.prototype=RealRactive.prototype;for(prop in RealRactive)RealRactive.hasOwnProperty(prop)&&(window.Ractive[prop]=RealRactive[prop]);return onResizeHandlers=[],window.onResize=function(e){onResizeHandlers[onResizeHandlers.length]=e},reportQueue=[],report=function(e,t,n,r){reportQueue[reportQueue.length]={hitType:"event",eventCategory:e,eventAction:t,eventLabel:n,eventValue:r};if(ga)while(reportQueue.length)ga("send",reportQueue.shift())},function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;p=function(e){return e?e.toLowerCase().replace(/[^a-z]/g,"-").replace(/-{2,}/g,"-").replace(/^-/,"").replace(/-$/,""):""},o={},window.tutorials=s=e.data.tutorials.map(function(e,t){return e.slug=p(e.title),e.index=t,o[e.slug]=e,e}),c=function(t){var r=n.javascript.getValue();teardown(),window.template=n.template.getValue(),window.output=document.getElementById("output");try{eval2(r),t!==!0&&report("javascript","execute",null,e.state.get("tutorialStepCode"))}catch(i){throw report("javascript","error",i.message||i,e.state.get("tutorialStepCode")),console.error(i),i}},h=function(){var t=n.console.getValue();try{eval2(t),report("console","execute",null,e.state.get("tutorialStepCode"))}catch(r){throw report("console","error",r.message||r,e.state.get("tutorialStepCode")),r}},t=new Main({el:"container",data:{numTutorials:s.length}}),t.divvy.restore(),t.divvy.on("resize",function(e){var t;this.save();if(!e["output-block"])return;var n=onResizeHandlers.length;while(n--)onResizeHandlers[n].call()}),r={copy:document.getElementById("copy"),output:document.getElementById("output"),templateEditor:document.getElementById("template-editor"),javascriptEditor:document.getElementById("javascript-editor"),consoleEditor:document.getElementById("console-editor")},n={},n.template=new CodeMirror(r.templateEditor,{mode:"htmlmixed",theme:"ractive",lineNumbers:!0,lineWrapping:!0}),n.javascript=new CodeMirror(r.javascriptEditor,{mode:"javascript",theme:"ractive",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Shift-Enter":c}}),n.console=new CodeMirror(r.consoleEditor,{mode:"javascript",theme:"ractive",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Shift-Enter":h}}),d=/#!\/([a-z\-]+)\/([0-9]+)/,v=function(){var t=d.exec(window.location.hash);t&&(i=o[t[1]],i&&e.state.set({tutorialIndex:i.index||0,stepIndex:+t[2]-1||0}))},e.state.set("tutorials",e.data.tutorials),window.location.hash?v():e.state.set({tutorialIndex:0,stepIndex:0}),window.addEventListener?window.addEventListener("hashchange",v):window.onhashchange=v,e.state.compute({currentTutorial:"${tutorials}[ ${tutorialIndex } ]",currentStep:"${currentTutorial}.steps[ ${stepIndex} ]",nextStepDisabled:"${stepIndex} >= ( ${currentTutorial}.steps.length - 1 )",prevStepDisabled:"${stepIndex} === 0",nextTutorialDisabled:"${tutorialIndex} >= ( ${tutorials}.length - 1 )",prevTutorialDisabled:"${tutorialIndex} === 0",tutorialStepCode:"( ( ${tutorialIndex} + 1 ) * 100 ) + ${stepIndex} + 1"}),m=function(i,s){if(!i)return;teardown(),n.template.setValue(i.template||""),n.javascript.setValue(i.javascript||""),n.console.setValue(i.console||""),t.set({copy:i.copy,css:i.styles||e.state.get("currentTutorial.styles"),fixDisabled:i.fixed?"":"disabled"}),i.init&&c(!0),prettyPrint(),window.location.hash="!/"+e.state.get("currentTutorial.slug")+"/"+(e.state.get("stepIndex")+1),r.copy.scrollTop=0,r.output.scrollTop=0,n.template.scrollTo(0,0),n.javascript.scrollTo(0,0),n.console.scrollTo(0,0),s||report("tutorial","reset",null,e.state.get("tutorialStepCode"))},e.state.observe({stepIndex:function(e){var n,r;n=e===0,r=e===this.get("currentTutorial.steps.length")-1,t.set({stepNum:e+1,stepOrTutorial:r?"tutorial":"step"})},nextStepDisabled:function(e){t.set("nextDisabled",e?"disabled":"")},prevStepDisabled:function(e){t.set("prevDisabled",e?"disabled":"")},nextTutorialDisabled:function(e){t.set("nextTutorialDisabled",e?"disabled":"")},prevTutorialDisabled:function(e){t.set("prevTutorialDisabled",e?"disabled":"")},tutorialStepCode:function(e){report("tutorial","enter",null,e)},currentStep:function(e){m(e,!0)},tutorialIndex:function(e){t.set("tutorialNum",e+1)},currentTutorial:function(e){if(!e)return;t.set({title:e.title,numSteps:e.steps.length})}}),t.on({"execute-js":c,"execute-console":h,prev:function(){var t=e.state.get("stepIndex");t>0&&e.state.set("stepIndex",t-1)},next:function(){var t,n,r,i;t=e.state.get("stepIndex"),n=e.state.get("currentTutorial.steps.length"),t<n-1?e.state.set("stepIndex",t+1):(r=e.state.get("tutorialIndex"),i=e.state.get("tutorials.length"),r<i-1&&e.state.set({tutorialIndex:r+1,stepIndex:0}))},prevTutorial:function(){var t;t=e.state.get("tutorialIndex"),t>0&&e.state.set({tutorialIndex:t-1,stepIndex:0})},nextTutorial:function(){var t;t=e.state.get("tutorialIndex"),t<s.length-1&&e.state.set({tutorialIndex:t+1,stepIndex:0})},fix:function(){var t,r,i;r=e.state.get("currentStep"),t=r.fixed;if(!t)throw new Error("Missing completed code for this step");n.template.setValue(t.template||r.template||""),n.javascript.setValue(t.javascript||r.javascript||""),n.console.setValue(t.console||r.console||""),report("javascript","fix",null,e.state.get("tutorialStepCode")),c(!0)},reset:function(){m(e.state.get("currentStep"))}})}}),define("app",["domReady","Statesman","controllers/main"],function(domReady,Statesman,main){var app,dataPromise;return app={state:new Statesman},app.state.debug=!0,dataPromise=$.getJSON("data.json"),domReady(function(){var eval2,result,warning;app.el=document.getElementById("container"),eval2=eval,function(){eval2('var test = "test"')}(),function(){try{result=eval2("test")}catch(e){}}(),result!=="test"?(warning=document.createElement("div"),warning.innerHTML='<p>This app will not work in some older browsers that implement <code>eval</code> incorrectly, including this one. Please try again using Chrome or Firefox.</p><p>Note that <span class="logo">Ractive.js</span> itself works in all modern browsers and Internet Explorer 8 and above.</p>',app.el.appendChild(warning)):dataPromise.then(function(e){app.data=e,main(app)})}),window.app=app,app}),function(){require.config({baseUrl:"js",paths:{Ractive:"lib/Ractive",Statesman:"lib/Statesman",Divvy:"lib/Divvy"},urlArgs:"bust="+(new Date).getTime()}),require(["app"])}(),define("main",function(){})})();